"use strict";(self.webpackChunkmattermost_webapp=self.webpackChunkmattermost_webapp||[]).push([[1119],{39403:(e,n,t)=>{t.r(n),t.d(n,{default:()=>Y});var r=t(62688),a=t.n(r),l=(t(29206),t(97023)),i=t.n(l),o=t(22005),s=t(92387),c=t.n(s),d=(t(12401),t(4290),t(57406),t(55448),t(23453)),p=t(81911),m=t(69813),u=t(31655),k=t(79751),b=t(17518),g=t(64517),f=t(78451),h=t(63155),y=(t(43813),t(14778)),E=t(85406),v=t(58628),_=t(3040),O=t(70669),w=t(85873),C=t(14696);const I=()=>{};function x(e){let{displayName:n,onExited:t,onCancel:r,onConfirm:a}=e;const{formatMessage:l}=(0,y.useIntl)(),o=l({id:"channel_bookmarks.confirm.delete.title",defaultMessage:"Delete bookmark"}),s=l({id:"channel_bookmarks.confirm.delete.button",defaultMessage:"Yes, delete"}),c=i().createElement(y.FormattedMessage,{id:"channel_bookmarks.confirm.delete.text",defaultMessage:"Are you sure you want to delete the bookmark <strong>{displayName}</strong>?",values:{strong:e=>i().createElement("strong",null,e),displayName:n}});return i().createElement(C.zW,{confirmButtonText:s,handleCancel:null!=r?r:I,handleConfirm:a,modalHeaderText:o,onExited:t,compassDesign:!0,isDeleteModal:!0},c)}x.propTypes={displayName:a().string.isRequired,onConfirm:a().func.isRequired,onCancel:a().func,onExited:a().func.isRequired};const D=x;var P=t(81994),B=t(97026);const j=e=>{let{bookmark:n,open:t}=e;const{formatMessage:r}=(0,y.useIntl)(),a=(0,d.useDispatch)(),o=(0,h.vV)(),s="link"===n.type&&n.link_url&&(0,h.kX)(n.link_url,o);let c;"file"===n.type?c=i().createElement(E.ArrowExpandIcon,{size:18}):n.link_url&&(c=s?i().createElement(E.OpenInNewIcon,{size:18}):i().createElement(E.BookOutlineIcon,{size:18}));const p=(0,B._4)(n.channel_id,"edit"),m=(0,B._4)(n.channel_id,"delete"),b=(0,B.bY)(),g=r({id:"channel_bookmarks.edit",defaultMessage:"Edit"}),C=r({id:"channel_bookmarks.open",defaultMessage:"Open"}),I=r({id:"channel_bookmarks.copy",defaultMessage:"Copy link"}),x=r({id:"channel_bookmarks.copyFilePublicLink",defaultMessage:"Get a public link"}),j=r({id:"channel_bookmarks.delete",defaultMessage:"Delete"}),M=(0,l.useCallback)((()=>{a((0,k.q)({modalId:f.IQ.CHANNEL_BOOKMARK_CREATE,dialogType:P.A,dialogProps:{bookmark:n,channelId:n.channel_id,onConfirm:async e=>a((0,v.Fu)(n.channel_id,n.id,e))}}))}),[v.Fu,a,n]),N=(0,l.useCallback)((()=>{"link"===n.type&&n.link_url?(0,w.lW)(n.link_url):"file"===n.type&&n.file_id&&(0,w.lW)((0,u.S1)(n.file_id))}),[n.type,n.link_url,n.file_id]),L=(0,l.useCallback)((()=>{a((0,k.q)({modalId:f.IQ.CHANNEL_BOOKMARK_DELETE,dialogType:D,dialogProps:{displayName:n.display_name,onConfirm:()=>a((0,v.uN)(n.channel_id,n.id))}}))}),[v.uN,a,n]),q=(0,l.useCallback)((()=>{n.file_id&&a((0,k.q)({modalId:f.IQ.GET_PUBLIC_LINK_MODAL,dialogType:_.A,dialogProps:{fileId:n.file_id}}))}),[n.file_id,a]);return i().createElement(O.mc,{anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},menuButton:{id:"channelBookmarksDotMenuButton-".concat(n.id),class:"channelBookmarksDotMenuButton",children:i().createElement(E.DotsHorizontalIcon,{size:18}),"aria-label":r({id:"channel_bookmarks.editBookmarkLabel",defaultMessage:"Bookmark menu"})},menu:{id:"channelBookmarksDotMenuDropdown"}},i().createElement(O.q7,{key:"channelBookmarksOpen",id:"channelBookmarksOpen",onClick:t,leadingElement:c,labels:i().createElement("span",null,C),"aria-label":C}),p&&i().createElement(O.q7,{key:"channelBookmarksEdit",id:"channelBookmarksEdit",onClick:M,leadingElement:i().createElement(E.PencilOutlineIcon,{size:18}),labels:i().createElement("span",null,g),"aria-label":g}),"link"===n.type&&i().createElement(O.q7,{key:"channelBookmarksLinkCopy",id:"channelBookmarksLinkCopy",onClick:N,leadingElement:i().createElement(E.LinkVariantIcon,{size:18}),labels:i().createElement("span",null,I),"aria-label":I}),"file"===n.type&&b&&i().createElement(O.q7,{key:"channelBookmarksFileCopy",id:"channelBookmarksFileCopy",onClick:q,leadingElement:i().createElement(E.LinkVariantIcon,{size:18}),labels:i().createElement("span",null,x),"aria-label":x}),m&&i().createElement(O.q7,{key:"channelBookmarksDelete",id:"channelBookmarksDelete",onClick:L,leadingElement:i().createElement(E.TrashCanOutlineIcon,{size:18}),labels:i().createElement("span",null,j),"aria-label":j,isDestructive:!0}))};j.propTypes={open:a().func.isRequired};const M=j;var N=t(92801);const L=["href","children","isFile","onClick"];function q(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function A(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?q(Object(t),!0).forEach((function(n){R(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):q(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function R(e,n,t){return(n=function(e){var n=function(e){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof n?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}const T=e=>{let{bookmark:n,drag:t,disableInteractions:r}=e;const{link:a,open:o}=(e=>{const n=(0,l.useRef)(null),t=(0,d.useDispatch)(),r=(0,d.useSelector)((n=>(null==e?void 0:e.file_id)&&(0,m.ly)(n,e.file_id)||void 0)),a=i().createElement(N.A,{type:e.type,emoji:e.emoji,imageUrl:e.image_url,fileInfo:r});let o;return"link"===e.type&&e.link_url?o=i().createElement(F,{href:e.link_url,ref:n,isFile:!1},a,i().createElement(S,null,e.display_name)):"file"===e.type&&e.file_id&&(o=i().createElement(F,{href:(0,u.S1)(e.file_id),onClick:n=>{n.preventDefault(),r&&t((0,k.q)({modalId:f.IQ.FILE_PREVIEW_MODAL,dialogType:g.A,dialogProps:{post:{user_id:e.owner_id,channel_id:e.channel_id},fileInfos:[r],startIndex:0}}))},ref:n,isFile:!0},a,i().createElement(S,null,e.display_name))),{link:o,icon:a,open:()=>{var e;null===(e=n.current)||void 0===e||e.click()}}})(n);return i().createElement(z,Object.assign({ref:t.innerRef},t.draggableProps,{$disableInteractions:r}),a&&(0,l.cloneElement)(a,A(A({},t.dragHandleProps),{},{role:"link"})),i().createElement(M,{bookmark:n,open:o}))};T.propTypes={isDragging:a().bool.isRequired,disableInteractions:a().bool.isRequired};const z=c().div.withConfig({displayName:"Chip"})(["position:relative;border-radius:12px;overflow:hidden;margin:1px 0;flex-shrink:0;min-width:5rem;max-width:25rem;button{position:absolute;visibility:hidden;right:6px;top:3px;}",""],(e=>{let{$disableInteractions:n}=e;return!n&&(0,s.css)(['&:hover,&:focus-within,&:has([aria-expanded="true"]){button{visibility:visible;}}&:hover,&:focus-within{a{text-decoration:none;cursor:pointer;}}&:hover,&:focus-within,&:has([aria-expanded="true"]){a{background:rgba(var(--center-channel-color-rgb),0.08);color:rgba(var(--center-channel-color-rgb),1);}}&:active:not(:has(button:active)),&--active,&--active:hover{a{background:rgba(var(--button-bg-rgb),0.08);color:rgb(var(--button-bg-rgb)) !important;.icon__text{color:rgb(var(--button-bg));}.icon{color:rgb(var(--button-bg));}}}'])})),S=c().span.withConfig({displayName:"Label"})(["white-space:nowrap;padding:4px 0;text-overflow:ellipsis;overflow:hidden;"]),F=(0,l.forwardRef)(((e,n)=>{let{href:t,children:r,isFile:a,onClick:l}=e,o=function(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(n.includes(r))continue;t[r]=e[r]}return t}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)t=l[r],n.includes(t)||{}.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}(e,L);const s=(0,h.vV)(),c=(0,h.kX)(t,s),d="!"===t[0];return d||c?i().createElement(W,Object.assign({},o,{href:d?t.substring(1):t,rel:"noopener noreferrer",target:"_blank",location:"channel_bookmarks.item",ref:n}),r):t.startsWith(s)&&!a?i().createElement(V,Object.assign({},o,{to:t.slice(s.length),ref:n}),r):i().createElement(K,Object.assign({},o,{href:t,ref:n,onClick:l}),r)})),H=(0,s.css)(["display:flex;padding:0 12px 0 6px;gap:5px;color:rgba(var(--center-channel-color-rgb),1);font-family:Open Sans;font-size:12px;font-style:normal;font-weight:600;line-height:16px;"]),K=c().a.withConfig({displayName:"StyledAnchor"})(["&&&&{","}"],H),V=c()(p.Link).withConfig({displayName:"StyledLink"})(["&&&&{","}"],H),W=c()(b.A).withConfig({displayName:"StyledExternalLink"})(["&&&&{","}"],H),Q=T;var G=t(44446);function U(e){let{channelId:n}=e;const{order:t,bookmarks:r,reorder:a}=(0,B._E)(n),l=(0,B._4)(n,"order"),s=(0,B.GX)(),c=Boolean(null==t?void 0:t.length),d=t.length>=B.PM;return c?i().createElement(o.DragDropContext,{onDragEnd:e=>{let{source:n,destination:t,draggableId:r}=e;t&&a(r,n.index,t.index)}},i().createElement(o.Droppable,{droppableId:"channel-bookmarks",direction:"horizontal"},((e,a)=>i().createElement($,Object.assign({ref:e.innerRef,"data-testid":"channel-bookmarks-container"},e.droppableProps),t.map(X(r,a.isDraggingOver,!l)),e.placeholder,i().createElement(G.A,{channelId:n,hasBookmarks:c,limitReached:d,canUploadFiles:s}))))):null}U.propTypes={channelId:a().string.isRequired};const X=(e,n,t)=>(r,a)=>i().createElement(o.Draggable,{key:r,draggableId:r,index:a,isDragDisabled:t},((t,a)=>i().createElement(Q,{key:r,drag:t,isDragging:a.isDragging,disableInteractions:a.isDragging||n,bookmark:e[r]}))),Y=U,$=c().div.withConfig({displayName:"Container"})(["display:flex;padding:0 6px;padding-right:0;min-height:38px;align-items:center;border-bottom:1px solid rgba(var(--center-channel-color-rgb),0.12);overflow-x:auto;max-width:100vw;"])}}]);
//# sourceMappingURL=1119.95e810a15c683cf1da00.js.map