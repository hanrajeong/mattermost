"use strict";(self.webpackChunkmattermost_webapp=self.webpackChunkmattermost_webapp||[]).push([[7351],{31551:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var l=a(71633),r=a.n(l),s=a(97023),n=a.n(s),o=a(14778),c=a(23453),i=a(81911),d=a(14696),u=a(71892),m=a(77440),h=a(62563),p=a(59671),T=a(79751),_=a(2386),g=a(75270),E=a(98496),C=a(45697),b=a(62688),S=a.n(b),R=(a(10844),a(35631)),f=a(7430),v=a(5955);const I=a.p+"files/a3bb00b98342a6b88a72.gif";var L=a(78451),M=a(19513),A=a(41953);function w(e){const t=(0,c.useDispatch)(),a=(0,c.useSelector)(f.WR),l=(0,s.useCallback)((e=>{M.e(e,L.YM.KeyCodes.ENTER)&&i()}),[]);(0,s.useEffect)((()=>(document.addEventListener("keydown",l),()=>document.removeEventListener("keydown",l))),[l]);const r=(0,s.useCallback)((e=>{if(t((0,T.O)(L.IQ.COLLAPSED_REPLY_THREADS_MODAL)),e){const e=[{user_id:a,category:L.pm.CRT_TUTORIAL_TRIGGERED,name:a,value:L.YM.CrtTutorialTriggerSteps.FINISHED.toString()}];t((0,R.SF)(a,e))}}),[a]),i=(0,s.useCallback)((()=>{const e=[{user_id:a,category:L.pm.CRT_TUTORIAL_TRIGGERED,name:a,value:L.YM.CrtTutorialTriggerSteps.STARTED.toString()},{user_id:a,category:A.AG.CRT_TUTORIAL_STEP,name:A.lg[A.AG.CRT_TUTORIAL_STEP],value:A._V.ENABLED.toString()}];t((0,R.SF)(a,e)),r(!1)}),[a]);return n().createElement(d.zW,{compassDesign:!0,className:"CollapsedReplyThreadsModal productNotices",id:L.IQ.COLLAPSED_REPLY_THREADS_MODAL,onExited:e.onExited,handleConfirm:i,autoCloseOnConfirmButton:!0,handleCancel:()=>r(!0),modalHeaderText:n().createElement(o.FormattedMessage,{id:"collapsed_reply_threads_modal.title",defaultMessage:"A new way to view and follow threads"}),confirmButtonText:n().createElement(n().Fragment,null,n().createElement(o.FormattedMessage,{id:"collapsed_reply_threads_modal.take_the_tour",defaultMessage:"Take the Tour"}),n().createElement(v.A,null)),cancelButtonText:n().createElement(o.FormattedMessage,{id:"collapsed_reply_threads_modal.skip_tour",defaultMessage:"Skip Tour"})},n().createElement("div",null,n().createElement("p",{className:"productNotices__helpText"},n().createElement(o.FormattedMessage,{id:"collapsedReplyThreadsModal.helpText",defaultMessage:"Threads have been revamped to help you create organized conversation around specific messages. Now, channels will appear less cluttered as replies are collapsed under the original message, and all the conversations you're following are available in your <b>Threads</b> view. Take the tour to see what's new.",values:{b:e=>n().createElement("b",null,e)}})),n().createElement("img",{src:I,className:"CollapsedReplyThreadsModal__img"})))}w.propTypes={onExited:S().func.isRequired};const y=w;var k=a(91502);const O=()=>{const{formatMessage:e}=(0,o.useIntl)(),t=n().createElement(o.FormattedMessage,{id:"tutorial_threads.welcome.title",defaultMessage:"Welcome to the Threads view!"}),a=n().createElement("p",null,e({id:"tutorial_threads.welcome.description",defaultMessage:"All the conversations that you’re participating in or following will show here. If you have unread messages or mentions within your threads, you’ll see that here too."})),l=(0,d.LX)(["sidebar-threads-button"],[]);return n().createElement(k.A,{title:t,screen:a,overlayPunchOut:l,placement:"right-start",pulsatingDotPlacement:"right"})};var D=a(3295);a(29206);const N=e=>n().createElement("svg",Object.assign({width:"18",height:"18",viewBox:"0 0 14 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),n().createElement("path",{d:"M11.7952 0.00524884C12.1312 0.00524884 12.4144 0.125249 12.6448 0.365248C12.8848 0.595648 13.0048 0.878848 13.0048 1.21485V8.41485C13.0048 8.75085 12.8848 9.03405 12.6448 9.26445C12.4144 9.49485 12.1312 9.61005 11.7952 9.61005H3.4L0.9952 12.0148V1.21485C0.9952 0.878848 1.1104 0.595648 1.3408 0.365248C1.5808 0.125249 1.8688 0.00524884 2.2048 0.00524884H11.7952ZM2.2048 1.21485V9.10605L2.896 8.41485H11.7952V1.21485H2.2048ZM3.4 3.01485H10.6V4.21005H3.4V3.01485ZM3.4 5.40525H8.8V6.61485H3.4V5.40525Z"}));var P=a(3490);const x=()=>{const{formatMessage:e}=(0,o.useIntl)(),t=(0,c.useDispatch)(),a=(0,c.useSelector)(m.WW),{url:l}=(0,i.useRouteMatch)(),{pathname:b}=(0,i.useLocation)(),S=null!=(0,i.matchPath)(b,{path:"/:team/threads/:threadIdentifier?"}),{currentTeamId:R,currentUserId:f}=(0,P.K)(),v=(0,c.useSelector)(h.kL),I=null==v?void 0:v.total_unread_threads,M=(0,c.useSelector)(E.S),A=(0,c.useSelector)((e=>(0,m.yW)(e,L.pm.CRT_TUTORIAL_STEP,f,L.JI.WELCOME_POPOVER))),w=(0,c.useSelector)((e=>(0,m.yW)(e,L.pm.CRT_TUTORIAL_TRIGGERED,f,L.Ay.CrtTutorialTriggerSteps.START))),k=(0,c.useSelector)(h.xW),x=w===L.$d.STARTED&&A===L.JI.WELCOME_POPOVER&&k.length>=1,H=(0,c.useSelector)(g.A),G=(0,c.useSelector)(g.bM),U=a&&w===L.Ay.CrtTutorialTriggerSteps.START&&!M&&Boolean(v)&&v.total>=1,V=(0,s.useCallback)((e=>{e.stopPropagation(),(0,p.sx)("crt","go_to_global_threads"),performance.mark(D.CU.GlobalThreadsLinkClicked),U&&t((0,T.q)({modalId:L.IQ.COLLAPSED_REPLY_THREADS_MODAL,dialogType:y,dialogProps:{}})),H&&G===L._n.EDIT_HISTORY&&t((0,_.bP)())}),[U,v,k,H,G]);return(0,s.useEffect)((()=>{a&&t((0,u.H_)(f,R))}),[f,R,a]),a?n().createElement("ul",{className:"SidebarGlobalThreads NavGroupContent nav nav-pills__container"},n().createElement("li",{id:"sidebar-threads-button",className:r()("SidebarChannel",{active:S,unread:I}),tabIndex:-1},n().createElement(i.Link,{onClick:V,to:"".concat(l,"/threads"),id:"sidebarItem_threads",draggable:"false",className:r()("SidebarLink sidebar-item",{"unread-title":Boolean(I)}),tabIndex:0},n().createElement("span",{className:"icon"},n().createElement(N,null)),n().createElement("div",{className:"SidebarChannelLinkLabel_wrapper"},n().createElement("span",{className:"SidebarChannelLinkLabel sidebar-item__name"},e({id:"globalThreads.sidebarLink",defaultMessage:"Threads"}))),(null==v?void 0:v.total_unread_mentions)>0&&n().createElement(C.A,{unreadMentions:v.total_unread_mentions,hasUrgent:Boolean(null==v?void 0:v.total_unread_urgent_mentions)}),U&&n().createElement(d.FS,null)),x&&n().createElement(O,null))):null}},3490:(e,t,a)=>{a.d(t,{K:()=>c}),a(3188),a(59297);var l=a(97023),r=a(23453),s=a(81911),n=a(14776),o=a(7430);function c(){const e=(0,s.useParams)(),t=(0,l.useMemo)((()=>e),[e.threadIdentifier,e.team]),a=(0,s.useHistory)(),c=(0,r.useSelector)(n.Sy,r.shallowEqual),i=(0,r.useSelector)(o.WR,r.shallowEqual),d=(0,l.useCallback)((e=>a.push("/".concat(t.team,"/threads").concat(e?"/"+e:""))),[t.team]),u=(0,l.useCallback)((()=>a.replace("/".concat(t.team,"/threads"))),[t.team]),m=(0,l.useCallback)((function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.team;return a.push("/".concat(l,"/pl/").concat(null!=e?e:t.threadIdentifier))}),[t.threadIdentifier,t.team]);return{params:t,history:a,currentTeamId:c,currentUserId:i,clear:u,select:d,goToInChannel:m}}},91502:(e,t,a)=>{a.d(t,{A:()=>n}),a(29206);var l=a(97023),r=a.n(l),s=a(99243);const n=e=>r().createElement(s.QN,Object.assign({},e,{tourCategory:s.AG.CRT_TUTORIAL_STEP}))},5955:(e,t,a)=>{a.d(t,{A:()=>u});var l=a(62688),r=a.n(l),s=a(71633),n=a.n(s),o=a(97023),c=a.n(o),i=a(14778);const d=e=>{let{additionalClassName:t}=e;const{formatMessage:a}=(0,i.useIntl)();return c().createElement("i",{className:n()("icon icon-chevron-right",t),title:a({id:"generic_icons.next",defaultMessage:"Next Icon"})})};d.propTypes={additionalClassName:r().string};const u=c().memo(d)}}]);
//# sourceMappingURL=7351.7aa8bd57135178aba093.js.map