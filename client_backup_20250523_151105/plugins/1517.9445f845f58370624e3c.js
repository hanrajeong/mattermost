"use strict";(self.webpackChunkmattermost_webapp=self.webpackChunkmattermost_webapp||[]).push([[1517],{65231:(e,t,a)=>{a.r(t),a.d(t,{default:()=>H}),a(17046),a(43813);var n=a(97023),o=a.n(n),r=a(14778),l=a(23453),i=a(92387),s=a.n(i),c=a(85406),d=a(97282),m=a(35631),p=a(26614),u=a(77440),g=a(7430),f=a(59671),b=a(51140),h=a(65664),x=a(71861),k=a(53791),y=a(85760),v=a(78451);const E="md",_={xs:10,sm:12,md:16,lg:20,xl:32};var S=a(49673),w=a(72562);const N=s()(S.Ay).withConfig({shouldForwardProp:(e,t)=>w.Aq.forceForwardProperty(e,["glyph","size"])||w.Aq.blockProperty(e)&&t(e)})((({theme:e,status:t})=>i.css`
        color: ${e.badges[t]};
    `));const O=e=>{var{status:t,size:a=E}=e,n=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a}(e,["status","size"]);let r="circle-outline";switch(t){case"away":r="clock";break;case"dnd":r="minus-circle";break;case"online":r="check-circle"}const l=Object.assign({status:t,glyph:r,size:_[a]},n);return o().createElement(N,Object.assign({},l))},A=s().div.withConfig({displayName:"Animation"})(["position:absolute;z-index:30;flex-direction:column;left:15px;bottom:0;display:none;&.completed{display:flex;}&:before{content:'';background-color:var(--denim-status-online);opacity:0;border-radius:50%;width:1rem;bottom:15%;position:absolute;height:1rem;margin-left:auto;margin-right:auto;left:0;right:0;}.x1{opacity:0;animation-delay:150ms;}.x2{transform:scale(0.6);margin-left:6px;animation-delay:250ms;opacity:0;}.x3{transform:scale(0.6);margin-left:-6px;animation-delay:300ms;opacity:0;}.x4{transform:scale(0.2);opacity:0;}&.completed{&:before{animation:opacity 800ms ease-in-out,scale 800ms linear;}.x1,.x2,.x3,.x4{animation:opacity 900ms ease-in-out,moveUp 900ms linear;}}@keyframes moveUp{0%{top:0;}100%{top:-50px;}}@keyframes opacity{0%{opacity:0;}50%{opacity:1;}100%{opacity:0;}}@keyframes scale{0%{transform:scale(0);}50%{transform:scale(2);}100%{transform:scale(4);}}"]),T=e=>o().createElement(A,{className:e.completed?"completed":""},o().createElement(O,{status:"online",className:"x1"}),o().createElement(O,{status:"online",className:"x2"}),o().createElement(O,{status:"online",className:"x3"}),o().createElement(O,{status:"online",className:"x4"}));var I=a(62688),C=a.n(I),M=a(83083),F=a(17518),R=a(12895);const z=a.p+"files/2a8c0b1b24fe26f9bfcf.svg",L=s().div.withConfig({displayName:"CompletedWrapper"})(['display:flex;flex-direction:column;align-items:center;padding:26px 24px 0 24px;margin:auto;text-align:center;word-break:break-word;width:100%;height:500px;&.fade-enter{transform:scale(0);}&.fade-enter-active{transform:scale(1);}&.fade-enter-done{transform:scale(1);}&.fade-exit{transform:scale(1);}&.fade-exit-active{transform:scale(1);}&.fade-exit-done{transform:scale(1);}.start-trial-btn,.got-it-button{padding:13px 20px;background:var(--button-bg);border-radius:4px;color:var(--sidebar-text);border:none;font-weight:bold;margin-top:15px;min-height:40px;&:hover{background:var(--button-bg) !important;color:var(--sidebar-text) !important;}}h2{font-size:20px;margin:0 0 10px;font-weight:600;}.start-trial-text,.completed-subtitle{font-size:14px !important;color:rgba(var(--center-channel-color-rgb),0.75);line-height:20px;}.completed-subtitle{margin-top:5px;}.disclaimer,.download-apps{width:90%;margin-top:15px;color:rgba(var(--center-channel-color-rgb),0.75);font-family:"Open Sans";font-style:normal;font-weight:normal;line-height:16px;}.disclaimer{text-align:left;margin-top:auto;font-size:11px;}.download-apps{margin-top:24px;width:200px;font-size:12px;}.style-link{border:none;background:none !important;color:var(--button-bg) !important;}.no-thanks-link{display:inline-block;min-width:fit-content;margin-top:18px;font-weight:600;font-size:14px;line-height:20px;&:hover{text-decoration:underline;}}']),P=e=>{const{dismissAction:t}=e,a=(0,l.useDispatch)();(0,n.useEffect)((()=>{a((0,d.fr)())}),[]);const i=(0,l.useSelector)((e=>e.entities.admin.prevTrialLicense)),s=(0,l.useSelector)(p.Ay),c=null==i?void 0:i.IsLicensed,m=null==s?void 0:s.IsLicensed,u="true"===(null==s?void 0:s.Cloud),g="false"===m&&"false"===c&&(e.isCurrentUserSystemAdmin||e.isFirstAdmin)&&!u;return o().createElement(o().Fragment,null,o().createElement(M.A,{in:!0,timeout:150,classNames:"fade"},o().createElement(L,null,o().createElement("img",{src:z,alt:"completed tasks image"}),o().createElement("h2",null,o().createElement(r.FormattedMessage,{id:"onboardingTask.checklist.completed_title",defaultMessage:"Well done. You’ve completed all of the tasks!"})),o().createElement("span",{className:"completed-subtitle"},o().createElement(r.FormattedMessage,{id:"onboardingTask.checklist.completed_subtitle",defaultMessage:"We hope Mattermost is more familiar now."})),g?o().createElement(o().Fragment,null,o().createElement("span",{className:"start-trial-text"},o().createElement(r.FormattedMessage,{id:"onboardingTask.checklist.higher_security_features",defaultMessage:"Interested in our higher-security features?"})," ",o().createElement("br",null),o().createElement(r.FormattedMessage,{id:"onboardingTask.checklist.start_enterprise_now",defaultMessage:"Start your free Enterprise trial now!"})),o().createElement(R.A,{telemetryId:"start_trial_from_onboarding_completed_task",onClick:t}),o().createElement("button",{onClick:t,className:"no-thanks-link style-link"},o().createElement(r.FormattedMessage,{id:"onboardingTask.checklist.no_thanks",defaultMessage:"No, thanks"}))):o().createElement("button",{onClick:t,className:"got-it-button"},o().createElement(r.FormattedMessage,{id:"collapsed_reply_threads_modal.confirm",defaultMessage:"Got it"})),o().createElement("div",{className:"download-apps"},o().createElement("span",null,o().createElement(r.FormattedMessage,{id:"onboardingTask.checklist.downloads",defaultMessage:"Now that you’re all set up, <link>download our apps.</link>!",values:{link:e=>o().createElement(F.A,{location:"onboarding_tasklist_completed",href:"https://mattermost.com/download#desktop"},e)}}))),g&&o().createElement("div",{className:"disclaimer"},o().createElement("span",null,o().createElement(r.FormattedMessage,{id:"onboardingTask.checklist.disclaimer",defaultMessage:"By clicking “Start trial”, I agree to the <linkEvaluation>Mattermost Software and Services License Agreement</linkEvaluation>, <linkPrivacy>privacy policy</linkPrivacy> and receiving product emails.",values:{linkEvaluation:e=>o().createElement(F.A,{href:v.vx.SOFTWARE_SERVICES_LICENSE_AGREEMENT,location:"onboarding_tasklist_completed"},e),linkPrivacy:e=>o().createElement(F.A,{href:v.L0.PRIVACY_POLICY,location:"onboarding_tasklist_completed"},e)}}))))))};P.propTypes={dismissAction:C().func.isRequired,isCurrentUserSystemAdmin:C().bool.isRequired,isFirstAdmin:C().bool.isRequired};const D=P;var V=a(94621),X=a(38889);const B=s().div.withConfig({displayName:"Overlay"})(["background-color:rgba(0,0,0,0.5);display:flex;align-items:flex-end;justify-content:center;height:100%;min-height:100%;left:0;right:0;top:0;position:fixed;overflow:auto;-webkit-overflow-scrolling:touch;overscroll-behavior:contain;pointer-events:auto;-ms-scroll-chaining:none;transition:150ms;transition-property:background-color;transition-timing-function:ease-in-out;z-index:100;&.fade-enter{background-color:rgba(0,0,0,0);}&.fade-enter-active{background-color:rgba(0,0,0,0.5);}&.fade-enter-done{background-color:rgba(0,0,0,0.5);}&.fade-exit{background-color:rgba(0,0,0,0.5);}&.fade-exit-active{background-color:rgba(0,0,0,0);}&.fade-exit-done{background-color:rgba(0,0,0,0);}"]),G=e=>{let{trigger:t,placement:a="top-start",isVisible:r,offset:l=[0,5],children:i,onClick:s}=e;const{x:c,y:d,strategy:m,refs:{setReference:p,setFloating:u}}=(0,V.we)({placement:a,middleware:[(0,V.cY)({mainAxis:l[1],crossAxis:l[0]})],whileElementsMounted:X.ll});(0,n.useLayoutEffect)((()=>{p(t)}),[p,t]);const g={container:{position:m,top:null!=d?d:0,left:null!=c?c:0,zIndex:r?100:-1}};return o().createElement(o().Fragment,null,o().createElement(M.A,{timeout:150,classNames:"fade",in:r,unmountOnExit:!0},o().createElement(B,{onClick:s,"data-cy":"onboarding-task-list-overlay"})),o().createElement("div",{ref:u,style:g.container},i))};G.propTypes={isVisible:C().bool.isRequired,children:C().node.isRequired,onClick:C().func.isRequired};const q=s().div.withConfig({displayName:"StyledTask"})(["display:flex;background-color:var(--center-channel-bg);cursor:pointer;width:100%;padding:8px 20px;font-size:14px;align-items:flex-start;color:var(--center-channel-color);position:relative;span{div{display:flex;align-items:flex-start;picture{display:flex;align-items:center;margin-right:10px;}}}&.completed{color:var(--denim-status-online);span{span{text-decoration:underline;text-decoration-skip-ink:none;text-underline-offset:-0.325em;}}}:hover{background:rgba(var(--center-channel-color-rgb),0.08);}:active{background-color:rgba(var(--button-bg-rgb),0.08);}:focus{box-shadow:inset 0 0 0 2px rgba(255,255,255,0.32),inset 0 0 0 2px blue;}transition:background 250ms ease-in-out,color 250ms ease-in-out,box-shadow 250ms ease-in-out;"]),K=e=>{const{label:t,completedStatus:a,onClick:n}=e;return o().createElement(q,{className:a?"completed":"",onClick:()=>{n&&n()}},a&&o().createElement(T,{completed:a}),o().createElement("span",null,t))};K.propTypes={label:C().element.isRequired,icon:C().node,onClick:C().func,completedStatus:C().bool.isRequired};const j=s().div.withConfig({displayName:"TaskItems"})(["border-radius:var(--radius-m);border:solid 1px rgba(var(--center-channel-color-rgb),0.16);background-color:var(--center-channel-bg);width:352px;padding:24px 0;transform:scale(0);opacity:0;box-shadow:var(--elevation-6);transition:opacity 250ms ease-in-out 0ms,transform 250ms ease-in-out 0ms;transform-origin:left bottom;max-height:","px;overflow-y:auto;display:none;&.open{transform:scale(1);opacity:1;display:block;}h1{font-size:20px;padding:0 24px;margin:0;}p{font-size:12px;color:rgba(var(--center-channel-color-rgb),0.75);padding:4px 24px;}.link{font-size:12px;color:var(--link-color);padding:12px 24px 0;font-weight:bold;cursor:pointer;display:block;:hover{text-decoration:underline}}"],document.documentElement.clientHeight),W=s().button.withConfig({displayName:"Button"})((e=>{let{open:t}=e;return(0,i.css)(["width:36px;height:36px;padding:7px;border-radius:var(--radius-full);left:15px;bottom:15px;position:fixed;z-index:101;display:flex;align-items:center;background:var(--center-channel-bg);border:solid 1px rgba(var(--center-channel-color-rgb),0.16);box-shadow:var(--elevation-3);color:rgba(var(--center-channel-color-rgb),0.75);&:hover{border-color:rgba(var(--center-channel-color-rgb),0.24);box-shadow:var(--elevation-4);color:rgba(var(--center-channel-color-rgb),0.75)}span{width:20px;height:16px;background:var(--button-bg);position:absolute;display:",";border-radius:12px;color:var(--button-color);font-weight:bold;font-size:11px;line-height:16px;bottom:22px;left:22px;}"],t?"none":"block")})),H=()=>{const{formatMessage:e}=(0,r.useIntl)(),t=(0,l.useSelector)((e=>0!==Object.keys((0,u.Zo)(e)).length));(0,n.useEffect)((()=>{E((0,d.fr)()),t||E((0,m.Zo)())}),[]);const a=(0,l.useSelector)((e=>(0,u.Jz)(e,k.XV,k.f5.ONBOARDING_TASK_LIST_OPEN))),[i,s]=(0,n.useState)(null),E=(0,l.useDispatch)(),_=(0,l.useSelector)(g.WR),S=(0,y.AC)(),w=(0,k.es)(),[N,O]=(0,n.useState)(w.filter((e=>e.status)).length),[A,I]=(0,n.useState)(!1),C=w.length-N,M=(0,x.qZ)(),F=(0,x.QS)(),R=(0,l.useSelector)((e=>"true"===(0,p.zj)(e).EnableOnboardingFlow)),[z,L]=(0,l.useSelector)(b.xp,((e,t)=>e[0]===t[0]&&e[1]===t[1])),P=(0,l.useSelector)(u.O4);(0,n.useEffect)((()=>{L&&(async()=>{await E((0,m.SF)(_,[{category:k.XV,user_id:_,name:k.f5.ONBOARDING_TASK_LIST_SHOW,value:"true"},{user_id:_,category:k.XV,name:k.f5.ONBOARDING_TASK_LIST_OPEN,value:"true"},{user_id:_,category:v.pm.RECOMMENDED_NEXT_STEPS,name:v.N$.HIDE,value:"true"}]))})()}),[]),(0,n.useEffect)((()=>{L&&z&&R&&(0,f.sx)(k.XV,k.f5.ONBOARDING_TASK_LIST_SHOW)}),[L,z,R]),(0,n.useEffect)((()=>{const e=w.filter((e=>e.status)).length;localStorage.getItem(k.XV)||N+1===e&&!a?(setTimeout((()=>{I(!0),O(e)}),100),setTimeout((()=>{I(!1),O(e)}),500),localStorage.removeItem(k.XV)):O(e)}),[w,N]);const V=(0,n.useCallback)((()=>{const e=[{user_id:_,category:k.XV,name:k.f5.ONBOARDING_TASK_LIST_SHOW,value:"false"},{user_id:_,category:k.XV,name:k.f5.ONBOARDING_TASK_LIST_OPEN,value:"false"}];E((0,m.SF)(_,e)),(0,f.sx)(k.XV,k.f5.DECLINED_ONBOARDING_TASK_LIST)}),[_]),X=(0,n.useCallback)((()=>{const e=[{user_id:_,category:k.XV,name:k.f5.ONBOARDING_TASK_LIST_OPEN,value:String(!a)}];E((0,m.SF)(_,e)),(0,f.sx)(k.XV,a?k.f5.ONBOARDING_TASK_LIST_CLOSE:k.f5.ONBOARDING_TASK_LIST_OPEN)}),[a,_]);return t&&z&&R?o().createElement(h.default,{theme:P},o().createElement(T,{completed:A}),o().createElement(W,{onClick:X,ref:e=>s(e),open:a,"data-cy":"onboarding-task-list-action-button","aria-label":e({id:"onboardingTask.checklist.start_onboarding_process",defaultMessage:"Start the onboarding process."})},a?o().createElement(c.CloseIcon,{size:20}):o().createElement(c.PlaylistCheckIcon,{size:20}),0!==C&&o().createElement("span",null,C)),o().createElement(G,{isVisible:a,trigger:i,onClick:X},o().createElement(j,{className:a?"open":""},N===w.length?o().createElement(D,{dismissAction:V,isFirstAdmin:F,isCurrentUserSystemAdmin:M}):o().createElement(o().Fragment,null,o().createElement("h1",null,o().createElement(r.FormattedMessage,{id:"next_steps_view.welcomeToMattermost",defaultMessage:"Welcome to Mattermost"})),o().createElement("p",null,o().createElement(r.FormattedMessage,{id:"onboardingTask.checklist.main_subtitle",defaultMessage:"Let's get up and running."})),w.map((e=>o().createElement(K,{key:k.XV+e.name,label:e.label(),onClick:()=>{var t;t=e.name,X(),S(t)},completedStatus:e.status}))),o().createElement("span",{className:"link",onClick:V},o().createElement(r.FormattedMessage,{id:"onboardingTask.checklist.dismiss_link",defaultMessage:"No thanks, I’ll figure it out myself"})))))):null}}}]);
//# sourceMappingURL=1517.9445f845f58370624e3c.js.map