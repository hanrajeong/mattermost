"use strict";(self.webpackChunkmattermost_webapp=self.webpackChunkmattermost_webapp||[]).push([[4310],{88153:(e,t,a)=>{a.d(t,{A:()=>d});var r=a(62688),s=a.n(r),n=a(71633),i=a.n(n),l=a(97023),m=a.n(l),o=a(14778),c=a(81911);const u=e=>{let{url:t,className:a,onClick:r}=e;const{formatMessage:s}=(0,o.useIntl)();return m().createElement("div",{className:i()("signup-header",a)},m().createElement(c.Link,{"data-testid":"back_button",onClick:r,to:t},m().createElement("span",{id:"back_button_icon",className:"fa fa-1x fa-angle-left",title:s({id:"generic_icons.back",defaultMessage:"Back Icon"})}),m().createElement(o.FormattedMessage,{id:"web.header.back",defaultMessage:"Back"})))};u.propTypes={url:s().string,className:s().string,onClick:s().func},u.defaultProps={url:"/"};const d=u},65894:(e,t,a)=>{a.d(t,{A:()=>i}),a(29206);var r=a(97023),s=a.n(r),n=a(30135);const i=function(e){return t=>{const a=(0,n.A)();return s().createElement(e,Object.assign({usageDeltas:a},t))}}},30135:(e,t,a)=>{a.d(t,{A:()=>l}),a(17046);var r=a(97023),s=a(11039),n=a(35412);const i=(e,t)=>t&&null!=e?e:Number.MAX_VALUE;function l(){const e=(0,n.A)(),[t,a]=(0,s.A)();return(0,r.useMemo)((()=>{var r,s,n;return{files:{totalStorage:e.files.totalStorage-i(null===(r=t.files)||void 0===r?void 0:r.total_storage,a),totalStorageLoaded:e.files.totalStorageLoaded},messages:{history:e.messages.history-i(null===(s=t.messages)||void 0===s?void 0:s.history,a),historyLoaded:e.messages.historyLoaded},teams:{active:e.teams.active-i(null===(n=t.teams)||void 0===n?void 0:n.active,a),cloudArchived:e.teams.cloudArchived,teamsLoaded:e.teams.teamsLoaded}}}),[e,t,a])}},79941:(e,t,a)=>{a.d(t,{A:()=>o});var r=a(62688),s=a.n(r),n=a(97023),i=a.n(n),l=a(14778);const m=e=>{let{customDescriptionText:t,siteName:a="Mattermost"}=e;const r=t||i().createElement(l.FormattedMessage,{id:"web.root.signup_info",defaultMessage:"All team communication in one place, searchable and accessible anywhere"});return i().createElement(i().Fragment,null,i().createElement("h1",{id:"site_name"},a),i().createElement("h3",{id:"site_description",className:"color--light"},r))};m.propTypes={customDescriptionText:s().string};const o=i().memo(m)},54310:(e,t,a)=>{a.r(t),a.d(t,{default:()=>P});var r=a(23453),s=a(65952),n=a(45955),i=a(26614),l=a(14776),m=a(65894),o=a(52231),c=a(62688),u=a.n(c),d=(a(3188),a(6552),a(29206),a(4290),a(97023)),p=a.n(d),h=a(14778),g=a(81911),E=a(96423),f=a(88153),v=a(79941),_=(a(76685),a(59671)),N=a(51534),M=a(78451),b=a(63155);function y(e,t,a){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class T extends p().PureComponent{constructor(e){var t;super(e),y(this,"submitNext",(e=>{e.preventDefault(),(0,_.sx)("display_name","click_next");const t=this.state.teamDisplayName.trim();var a,r;if(!t)return this.setState({nameError:p().createElement(h.FormattedMessage,{id:"create_team.display_name.required",defaultMessage:"This field is required"})}),void(null===(a=this.teamNameInput.current)||void 0===a||a.focus());if(t.length<M.Ay.MIN_TEAMNAME_LENGTH||t.length>M.Ay.MAX_TEAMNAME_LENGTH)return this.setState({nameError:p().createElement(h.FormattedMessage,{id:"create_team.display_name.charLength",defaultMessage:"Name must be {min} or more characters up to a maximum of {max}. You can add a longer team description later.",values:{min:M.Ay.MIN_TEAMNAME_LENGTH,max:M.Ay.MAX_TEAMNAME_LENGTH}})}),void(null===(r=this.teamNameInput.current)||void 0===r||r.focus());const s=this.props.state;s.wizard="team_url",s.team.display_name=t,s.team.name=(0,b.aM)(t),this.props.updateParent(s)})),y(this,"handleFocus",(e=>{e.preventDefault(),e.currentTarget.select()})),y(this,"handleDisplayNameChange",(e=>{this.setState({teamDisplayName:e.target.value})})),this.teamNameInput=p().createRef(),this.state={teamDisplayName:(null===(t=this.props.state.team)||void 0===t?void 0:t.display_name)||""}}componentDidMount(){(0,_.sx)("signup","signup_team_01_name")}render(){let e=null,t="form-group";return this.state.nameError&&(e=p().createElement("label",{role:"alert",className:"control-label",id:"teamNameInputError"},this.state.nameError),t+=" has-error"),p().createElement("div",null,p().createElement("form",null,p().createElement("img",{alt:"signup logo",className:"signup-team-logo",src:N}),p().createElement("label",{htmlFor:"teamNameInput"},p().createElement(h.FormattedMessage,{id:"create_team.display_name.teamName",tagName:"strong",defaultMessage:"Team Name"})),p().createElement("div",{className:t},p().createElement("div",{className:"row"},p().createElement("div",{className:"col-sm-9"},p().createElement("input",{id:"teamNameInput",type:"text",ref:this.teamNameInput,className:"form-control",placeholder:"",maxLength:128,value:this.state.teamDisplayName,autoFocus:!0,onFocus:this.handleFocus,onChange:this.handleDisplayNameChange,spellCheck:"false","aria-describedby":"teamNameInputError"}))),e),p().createElement("div",null,p().createElement(h.FormattedMessage,{id:"create_team.display_name.nameHelp",defaultMessage:"Name your team in any language. Your team name shows in menus and headings."})),p().createElement("button",{id:"teamNameNextButton",type:"submit",className:"btn btn-primary mt-8",onClick:this.submitNext},p().createElement(h.FormattedMessage,{id:"create_team.display_name.next",defaultMessage:"Next"}),p().createElement("i",{className:"icon icon-chevron-right"}))))}}y(T,"propTypes",{state:u().shape({wizard:u().string.isRequired}).isRequired,updateParent:u().func.isRequired});var A=a(5908),L=a(23739),R=(a(43813),a(34529)),w=a(17518),x=a(87131);function F(e,t,a){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class k extends p().PureComponent{constructor(e){var t;super(e),F(this,"submitBack",(e=>{e.preventDefault(),(0,_.sx)("signup","click_back");const t=this.props.state;t.wizard="display_name",this.props.updateParent(t)})),F(this,"submitNext",(async e=>{e.preventDefault(),(0,_.sx)("signup","click_finish");const t=this.state.teamURL.trim(),a=b.aM(t),{actions:{checkIfTeamExists:r,createTeam:s}}=this.props;var n,i,l;if(!t)return this.setState({nameError:p().createElement(h.FormattedMessage,{id:"create_team.team_url.required",defaultMessage:"This field is required"})}),void(null===(n=this.teamURLInput.current)||void 0===n||n.focus());if(a.length<M.Ay.MIN_TEAMNAME_LENGTH||a.length>M.Ay.MAX_TEAMNAME_LENGTH)return this.setState({nameError:p().createElement(h.FormattedMessage,{id:"create_team.team_url.charLength",defaultMessage:"Name must be {min} or more characters up to a maximum of {max}",values:{min:M.Ay.MIN_TEAMNAME_LENGTH,max:M.Ay.MAX_TEAMNAME_LENGTH}})}),void(null===(i=this.teamURLInput.current)||void 0===i||i.focus());if(a!==t||!/^[a-z]+([a-z\-0-9]+|(__)?)[a-z0-9]+$/g.test(t))return this.setState({nameError:p().createElement(h.FormattedMessage,{id:"create_team.team_url.regex",defaultMessage:"Use only lower case letters, numbers and dashes. Must start with a letter and can't end in a dash."})}),void(null===(l=this.teamURLInput.current)||void 0===l||l.focus());for(let e=0;e<M.Ay.RESERVED_TEAM_NAMES.length;e++)if(0===a.indexOf(M.Ay.RESERVED_TEAM_NAMES[e]))return void this.setState({nameError:p().createElement(h.FormattedMessage,{id:"create_team.team_url.taken",defaultMessage:"This URL <link>starts with a reserved word</link> or is unavailable. Please try another.",values:{link:e=>p().createElement(w.A,{href:"https://docs.mattermost.com/help/getting-started/creating-teams.html#team-url",location:"team_url"},e)}})});this.setState({isLoading:!0});const m=JSON.parse(JSON.stringify(this.props.state));if(m.team.type="O",m.team.name=t,(await r(t)).data)return this.setState({nameError:p().createElement(h.FormattedMessage,{id:"create_team.team_url.unavailable",defaultMessage:"This URL is taken or unavailable. Please try another."})}),void this.setState({isLoading:!1});const o=await s(m.team),c=o.data,u=o.error;c?(this.props.history.push("/"+c.name+"/channels/"+M.Ay.DEFAULT_CHANNEL),(0,_.sx)("signup","signup_team_03_complete")):u&&(this.setState({nameError:u.message}),this.setState({isLoading:!1}))})),F(this,"handleFocus",(e=>{e.preventDefault(),e.currentTarget.select()})),F(this,"handleTeamURLInputChange",(e=>{this.setState({teamURL:e.target.value})})),this.teamURLInput=p().createRef(),this.state={nameError:"",isLoading:!1,teamURL:null===(t=e.state.team)||void 0===t?void 0:t.name}}componentDidMount(){(0,_.sx)("signup","signup_team_02_url")}render(){let e=null,t="form-group";this.state.nameError&&(e=p().createElement("label",{role:"alert",className:"control-label",id:"teamURLInputError"},this.state.nameError),t+=" has-error");const a="".concat(b.vV(),"/");let r=p().createElement(h.FormattedMessage,{id:"create_team.team_url.finish",defaultMessage:"Finish"});return this.state.isLoading&&(r=p().createElement(h.FormattedMessage,{id:"create_team.team_url.creatingTeam",defaultMessage:"Creating team..."})),p().createElement("div",null,p().createElement("form",null,p().createElement("img",{alt:"signup team logo",className:"signup-team-logo",src:N}),p().createElement("label",{htmlFor:"teamURLInput"},p().createElement(h.FormattedMessage,{id:"create_team.team_url.teamUrl",tagName:"strong",defaultMessage:"Team URL"})),p().createElement("div",{className:t},p().createElement("div",{className:"row"},p().createElement("div",{className:"col-sm-11"},p().createElement("div",{className:"input-group input-group--limit"},p().createElement(x.A,{title:a},p().createElement("span",{className:"input-group-addon"},a)),p().createElement("input",{id:"teamURLInput",type:"text",ref:this.teamURLInput,className:"form-control",placeholder:"",maxLength:128,value:this.state.teamURL,autoFocus:!0,onFocus:this.handleFocus,onChange:this.handleTeamURLInputChange,spellCheck:"false","aria-describedby":"teamURLInputError"})))),e),p().createElement("p",null,p().createElement(h.FormattedMessage,{id:"create_team.team_url.webAddress",defaultMessage:"Choose the web address of your new team:"})),p().createElement("ul",{className:"color--light"},p().createElement("li",null,p().createElement(h.FormattedMessage,{id:"create_team.team_url.hint1",defaultMessage:"Short and memorable is best"})),p().createElement("li",null,p().createElement(h.FormattedMessage,{id:"create_team.team_url.hint2",defaultMessage:"Use lowercase letters, numbers and dashes"})),p().createElement("li",null,p().createElement(h.FormattedMessage,{id:"create_team.team_url.hint3",defaultMessage:"Must start with a letter and can't end in a dash"}))),p().createElement("div",{className:"mt-8"},p().createElement(R.Button,{id:"teamURLFinishButton",type:"submit",bsStyle:"primary",disabled:this.state.isLoading,onClick:e=>this.submitNext(e)},r)),p().createElement("div",{className:"mt-8"},p().createElement("a",{href:"#",onClick:this.submitBack},p().createElement(h.FormattedMessage,{id:"create_team.team_url.back",defaultMessage:"Back to previous step"})))))}}F(k,"propTypes",{state:u().shape({wizard:u().string.isRequired}).isRequired,updateParent:u().func.isRequired,actions:u().shape({checkIfTeamExists:u().func.isRequired,createTeam:u().func.isRequired}).isRequired,history:u().shape({}).isRequired});const S=(0,r.connect)(null,(function(e){return{actions:(0,A.bindActionCreators)({checkIfTeamExists:L.lY,createTeam:L.gj},e)}}))(k);function C(e,t,a){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class I extends p().PureComponent{constructor(e){super(e),C(this,"updateParent",(e=>{this.setState(e),this.props.history.push("/create_team/"+e.wizard)})),this.state={team:{},wizard:"display_name"}}componentDidMount(){const{formatMessage:e}=this.props.intl;document.title=e({id:"create_team.pageTitle",defaultMessage:"Create a team - {siteName}"},{siteName:this.props.siteName||"Mattermost"})}render(){const{currentChannel:e,currentTeam:t,customDescriptionText:a,match:r,siteName:s,isCloud:n,isFreeTrial:i,usageDeltas:{teams:{active:l}}}=this.props,m=n&&!i&&l>=0;let o="/select_team";return t&&(o="/".concat(t.name),e&&(o+="/channels/".concat(e.name))),p().createElement("div",null,p().createElement(E.default,null),p().createElement(f.A,{url:o}),p().createElement("div",{className:"col-sm-12"},p().createElement("div",{className:"signup-team__container"},p().createElement(v.A,{customDescriptionText:a,siteName:s}),p().createElement("div",{className:"signup__content"},m?p().createElement(p().Fragment,null,p().createElement("h5",null,p().createElement(h.FormattedMessage,{id:"create_team.createTeamRestricted.title",tagName:"strong",defaultMessage:"Professional feature"})),p().createElement("div",null,p().createElement(h.FormattedMessage,{id:"create_team.createTeamRestricted.message",defaultMessage:"Your workspace plan has reached the limit on the number of teams. Create unlimited teams with a free 30-day trial. Contact your System Administrator."}))):p().createElement(g.Switch,null,p().createElement(g.Route,{path:"".concat(this.props.match.url,"/display_name"),render:e=>p().createElement(T,Object.assign({state:this.state,updateParent:this.updateParent},e))}),p().createElement(g.Route,{path:"".concat(this.props.match.url,"/team_url"),render:e=>p().createElement(S,Object.assign({state:this.state,updateParent:this.updateParent},e))}),p().createElement(g.Redirect,{to:"".concat(r.url,"/display_name")}))))))}}C(I,"propTypes",{customDescriptionText:u().string,siteName:u().string,match:u().shape({url:u().string.isRequired}).isRequired,isCloud:u().bool.isRequired,isFreeTrial:u().bool.isRequired});const D=(0,h.injectIntl)(I),P=(0,m.A)((0,r.connect)((function(e){const t=(0,i.zj)(e),a=(0,s.Lw)(e),r=(0,l.H7)(e),m=t.CustomDescriptionText,c=t.SiteName,u=(0,n.dw)(e),d=(0,i.Ay)(e);return{currentChannel:a,currentTeam:r,customDescriptionText:m,siteName:c,isCloud:(0,o.P3)(d),isFreeTrial:"true"===(null==u?void 0:u.is_free_trial)}}))(D))},51534:(e,t,a)=>{e.exports=a.p+"files/ab8aa80cba445eb0fb75.png"}}]);
//# sourceMappingURL=4310.54a490fcbff5d5620d37.js.map