"use strict";(self.webpackChunkmattermost_webapp=self.webpackChunkmattermost_webapp||[]).push([[9544],{29544:(e,t,a)=>{a.r(t),a.d(t,{default:()=>D});var r=a(23453),s=a(3569),o=a(26614),n=a(79342),l=a(62688),i=a.n(l),c=(a(17046),a(36169),a(3188),a(30973),a(10844),a(4290),a(9241)),m=a(97023),d=a.n(m),u=a(14778),g=a(81911),f=a(87064),E=a(78451),_=a(17518);const p=e=>{let{url:t,message:a}=e;return d().createElement(_.A,{href:t,location:"error_link"},d().createElement(u.FormattedMessage,a))};p.propTypes={url:i().string},p.defaultProps={url:""};const M=p;var h=a(45955);function N(){const e=(0,r.useSelector)(h.KJ);return d().createElement(u.FormattedMessage,{id:"cloud_archived.error.access",defaultMessage:"Permalink belongs to a message that has been archived because of {planName} limits. Upgrade to access message again.",values:{planName:e}})}const A=e=>{let{type:t,message:a,service:r,isGuest:s}=e,o=null;if(t)switch(t){case E.f2.LOCAL_STORAGE:o=d().createElement("div",null,d().createElement(u.FormattedMessage,{id:"error.local_storage.message",defaultMessage:"Mattermost was unable to load because a setting in your browser prevents the use of its local storage features. To allow Mattermost to load, try the following actions:"}),d().createElement("ul",null,d().createElement("li",null,d().createElement(u.FormattedMessage,{id:"error.local_storage.help1",defaultMessage:"Enable cookies"})),d().createElement("li",null,d().createElement(u.FormattedMessage,{id:"error.local_storage.help2",defaultMessage:"Turn off private browsing"})),d().createElement("li",null,d().createElement(u.FormattedMessage,{id:"error.local_storage.help3",defaultMessage:"Use a supported browser (IE 11, Chrome 61+, Firefox 60+, Safari 12+, Edge 42+)"}))));break;case E.f2.PERMALINK_NOT_FOUND:o=d().createElement("p",null,d().createElement(u.FormattedMessage,{id:"permalink.error.access",defaultMessage:"Permalink belongs to a deleted message or to a channel to which you do not have access."}));break;case E.f2.CLOUD_ARCHIVED:o=d().createElement("p",null,d().createElement(N,null));break;case E.f2.TEAM_NOT_FOUND:o=d().createElement("p",null,d().createElement(u.FormattedMessage,{id:"error.team_not_found.message",defaultMessage:"The team you're requesting is private or does not exist. Please contact your Administrator for an invitation."}));break;case E.f2.CHANNEL_NOT_FOUND:o=d().createElement("p",null,s?d().createElement(u.FormattedMessage,{id:"error.channel_not_found.message_guest",defaultMessage:"Your guest account has no channels assigned. Please contact an administrator."}):d().createElement(u.FormattedMessage,{id:"error.channel_not_found.message",defaultMessage:"The channel you're requesting is private or does not exist. Please contact an Administrator to be added to the channel."}));break;case E.f2.OAUTH_MISSING_CODE:o=d().createElement("div",null,d().createElement("p",null,d().createElement(u.FormattedMessage,{id:"error.oauth_missing_code",defaultMessage:"The service provider {service} did not provide an authorization code in the redirect URL.",values:{service:r}})),d().createElement("p",null,d().createElement(u.FormattedMessage,{id:"error.oauth_missing_code.google",defaultMessage:"For {link} make sure your administrator enabled the Google+ API.",values:{link:d().createElement(M,{url:"https://docs.mattermost.com/deployment/sso-google.html",message:(0,u.defineMessage)({id:"error.oauth_missing_code.google.link",defaultMessage:"Google Apps"})})}})),d().createElement("p",null,d().createElement(u.FormattedMessage,{id:"error.oauth_missing_code.office365",defaultMessage:"For {link} make sure the administrator of your Microsoft organization has enabled the Mattermost app.",values:{link:d().createElement(M,{url:"https://docs.mattermost.com/deployment/sso-office.html",message:(0,u.defineMessage)({id:"error.oauth_missing_code.office365.link",defaultMessage:"Entra ID"})})}})),d().createElement("p",null,d().createElement(u.FormattedMessage,{id:"error.oauth_missing_code.gitlab",defaultMessage:"For {link} please make sure you followed the setup instructions.",values:{link:d().createElement(M,{url:"https://docs.mattermost.com/deployment/sso-gitlab.html",message:(0,u.defineMessage)({id:"error.oauth_missing_code.gitlab.link",defaultMessage:"GitLab"})})}})),d().createElement("p",null,d().createElement(u.FormattedMessage,{id:"error.oauth_missing_code.forum",defaultMessage:"If you reviewed the above and are still having trouble with configuration, you may post in our {link} where we'll be happy to help with issues during setup.",values:{link:d().createElement(M,{url:"https://forum.mattermost.com/c/trouble-shoot",message:(0,u.defineMessage)({id:"error.oauth_missing_code.forum.link",defaultMessage:"Troubleshooting forum"})})}})));break;case E.f2.OAUTH_ACCESS_DENIED:o=d().createElement("p",null,d().createElement(u.FormattedMessage,{id:"error.oauth_access_denied",defaultMessage:"You must authorize Mattermost to log in with {service}.",values:{service:r}}));break;case E.f2.OAUTH_INVALID_REDIRECT_URL:case E.f2.OAUTH_INVALID_PARAM:o=d().createElement("p",null,a);break;case E.f2.PAGE_NOT_FOUND:default:o=d().createElement("p",null,d().createElement(u.FormattedMessage,{id:"error.not_found.message",defaultMessage:"The page you were trying to reach does not exist"}))}else o=a?d().createElement("p",null,a):d().createElement("p",null,d().createElement(u.FormattedMessage,{id:"error.generic.message",defaultMessage:"An error has occurred."}));return o};A.propTypes={type:i().oneOfType([i().string,i().oneOf([null])]),message:i().string,service:i().string,isGuest:i().bool};const b=A,k=e=>{let{type:t,title:a}=e,r=null;if(t)switch(t){case E.f2.LOCAL_STORAGE:r=d().createElement(u.FormattedMessage,{id:"error.local_storage.title",defaultMessage:"Cannot Load Mattermost"});break;case E.f2.PERMALINK_NOT_FOUND:r=d().createElement(u.FormattedMessage,{id:"permalink.error.title",defaultMessage:"Message Not Found"});break;case E.f2.CLOUD_ARCHIVED:r=d().createElement(u.FormattedMessage,{id:"cloud_archived.error.title",defaultMessage:"Message Archived"});break;case E.f2.OAUTH_ACCESS_DENIED:r=d().createElement(u.FormattedMessage,{id:"error.oauth_access_denied.title",defaultMessage:"Authorization Error"});break;case E.f2.OAUTH_MISSING_CODE:r=d().createElement(u.FormattedMessage,{id:"error.oauth_missing_code.title",defaultMessage:"Mattermost Needs Your Help"});break;case E.f2.OAUTH_INVALID_REDIRECT_URL:case E.f2.OAUTH_INVALID_PARAM:r=d().createElement(u.FormattedMessage,{id:"error.oauth_invalid_param.title",defaultMessage:"OAuth Parameter Error"});break;case E.f2.TEAM_NOT_FOUND:r=d().createElement(u.FormattedMessage,{id:"error.team_not_found.title",defaultMessage:"Team Not Found"});break;case E.f2.CHANNEL_NOT_FOUND:r=d().createElement(u.FormattedMessage,{id:"error.channel_not_found.title",defaultMessage:"Channel Not Found"});break;case E.f2.PAGE_NOT_FOUND:default:r=d().createElement(u.FormattedMessage,{id:"error.not_found.title",defaultMessage:"Page Not Found"})}else r=a?d().createElement(d().Fragment,null,a):d().createElement(u.FormattedMessage,{id:"error.generic.title",defaultMessage:"Error"});return r};k.propTypes={type:i().oneOfType([i().string,i().oneOf([null])]),title:i().string.isRequired};const F=k;class v extends d().PureComponent{componentDidMount(){document.body.setAttribute("class","sticky error")}componentWillUnmount(){document.body.removeAttribute("class")}render(){const{isGuest:e}=this.props,t=new URLSearchParams(this.props.location.search),a=t.get("s");let r=!1;if(a){t.delete("s");const e="-----BEGIN PUBLIC KEY-----\n"+this.props.asymmetricSigningPublicKey+"\n-----END PUBLIC KEY-----",s=c.createVerify("sha256");s.update("/error?"+t.toString()),r=s.verify(e,a,"base64")}const s=t.get("type"),o=r&&t.get("title")||"",n=r&&t.get("message")||"",l=r&&t.get("service")||"",i=r&&t.get("returnTo")||"";let m;m=s===E.f2.PERMALINK_NOT_FOUND&&i||s===E.f2.CLOUD_ARCHIVED&&i?d().createElement(g.Link,{to:i},d().createElement(u.FormattedMessage,{id:"error.generic.link",defaultMessage:"Back to Mattermost"})):s===E.f2.TEAM_NOT_FOUND?d().createElement(g.Link,{to:"/"},d().createElement(u.FormattedMessage,{id:"error.generic.siteLink",defaultMessage:"Back to {siteName}",values:{siteName:this.props.siteName}})):s===E.f2.CHANNEL_NOT_FOUND&&e?d().createElement(g.Link,{to:"/"},d().createElement(u.FormattedMessage,{id:"error.channelNotFound.guest_link",defaultMessage:"Back"})):s===E.f2.CHANNEL_NOT_FOUND?d().createElement(g.Link,{to:t.get("returnTo")},d().createElement(u.FormattedMessage,{id:"error.channelNotFound.link",defaultMessage:"Back to {defaultChannelName}",values:{defaultChannelName:E.YM.DEFAULT_CHANNEL_UI_NAME}})):s===E.f2.OAUTH_ACCESS_DENIED||s===E.f2.OAUTH_MISSING_CODE?d().createElement(g.Link,{to:"/"},d().createElement(u.FormattedMessage,{id:"error.generic.link_login",defaultMessage:"Back to Login Page"})):s===E.f2.OAUTH_INVALID_PARAM||s===E.f2.OAUTH_INVALID_REDIRECT_URL?null:d().createElement(g.Link,{to:"/"},d().createElement(u.FormattedMessage,{id:"error.generic.siteLink",defaultMessage:"Back to {siteName}",values:{siteName:this.props.siteName}}));const _=d().createElement("div",{className:"container-fluid"},d().createElement("div",{className:"error__container"},d().createElement("div",{className:"error__icon"},d().createElement(f.A,null)),d().createElement("h2",{"data-testid":"errorMessageTitle"},d().createElement(F,{type:s,title:o})),d().createElement(b,{type:s,message:n,service:l,isGuest:e}),m));return d().createElement(d().Fragment,null,_)}}var y,O,T;y=v,O="propTypes",T={location:i().shape({search:i().string.isRequired}).isRequired,asymmetricSigningPublicKey:i().string,siteName:i().string,isGuest:i().bool},(O=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(O))in y?Object.defineProperty(y,O,{value:T,enumerable:!0,configurable:!0,writable:!0}):y[O]=T;const D=(0,r.connect)((function(e){const t=(0,o.zj)(e),a=(0,s.HW)(e);return{siteName:t.SiteName,asymmetricSigningPublicKey:t.AsymmetricSigningPublicKey,isGuest:Boolean(a&&(0,n.P)(a.roles))}}))(v)},87064:(e,t,a)=>{a.d(t,{A:()=>d});var r=a(62688),s=a.n(r),o=a(71633),n=a.n(o),l=a(97023),i=a.n(l),c=a(14778);const m=e=>{let{additionalClassName:t}=e;const{formatMessage:a}=(0,c.useIntl)();return i().createElement("i",{className:n()("fa fa-warning",t),title:a({id:"generic_icons.warning",defaultMessage:"Warning Icon"})})};m.propTypes={additionalClassName:s().string};const d=i().memo(m)}}]);
//# sourceMappingURL=9544.e8ca2cfc3d0089dc7a24.js.map