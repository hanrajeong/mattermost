(self.webpackChunkmattermost_webapp=self.webpackChunkmattermost_webapp||[]).push([[1748],{21748:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>W}),n(17046),n(57406),n(55448);var a=n(67710),r=n.n(a),o=n(97023),l=n.n(o),i=n(23453),c=n(40057),s=n(43595),p=n(26614),u=n(80635),d=n(21650),m=n(78451),_=n(75792),b=(n(43813),n(14778)),v=n(17651),g=n(3569),h=n(14776),E=n(77656),f=n(87131),I=n(27840);const A=e=>Boolean(null==e?void 0:e.app_id),N=e=>{const{binding:t}=e,n=(0,i.useDispatch)(),a=(0,b.useIntl)(),r=(0,i.useSelector)(g.eH),o=(0,i.useSelector)(h.Sy),c="app-bar-icon-".concat(t.app_id),s=t.label||t.app_id;return l().createElement(f.A,{title:s,isVertical:!1},l().createElement("div",{id:c,"aria-label":s,className:"app-bar__icon",onClick:async()=>{const e=(0,I.aC)(t.app_id,t.location,r,o),l=await n((0,E.I$)(t,e,a));if(l.error){const t=l.error.text||"An error occurred";return void n((0,E.rK)(l.error,t,e))}const i=l.data;switch(i.type){case v.G4.OK:return void(i.text&&n((0,E.rK)(i,i.text,e)));case v.G4.FORM:return void(i.form&&n((0,E.el)(i.form,e)));case v.G4.NAVIGATE:return;default:{const t=a.formatMessage({id:"apps.error.responses.unknown_type",defaultMessage:"App response type not supported. Response type: {type}."},{type:i.type});n((0,E.rK)(i,t,e))}}}},l().createElement("div",{className:"app-bar__icon-inner"},l().createElement("img",{src:t.icon}))))};var O=n(85406),y=n(79751),S=n(72369);const k=()=>{const{formatMessage:e}=(0,b.useIntl)(),t=(0,i.useDispatch)(),n=(0,o.useCallback)((()=>{t((0,y.q)({modalId:m.IQ.PLUGIN_MARKETPLACE,dialogType:S.A,dialogProps:{openedFrom:"app_bar"}}))}),[t]),a=e({id:"app_bar.marketplace",defaultMessage:"App Marketplace"});return l().createElement(f.A,{title:a,isVertical:!1},l().createElement("button",{key:"app_bar_marketplace",className:"app_bar__marketplace_button","aria-label":a,onClick:n},l().createElement(O.ViewGridPlusOutlineIcon,{size:18})))};var R=n(71633),D=n.n(R),T=n(65952),w=n(75270),C=n(46725),x=n(62114),P=function(e){return e.LOADING="loading",e.LOADED="loaded",e.ERROR="error",e}(P||{});const L=e=>Boolean((null==e?void 0:e.id)&&(null==e?void 0:e.pluginId)),B=e=>{let{component:t}=e;const n=(0,i.useSelector)(T.Lw),a=(0,i.useSelector)(T.tW),r=(0,i.useSelector)(w.R3),[c,s]=(0,o.useState)(P.LOADING),p="iconUrl"in t?t.iconUrl:void 0,u="icon"in t?t.icon:void 0,d="dropdownText"in t?t.dropdownText:void 0,_="rhsComponentId"in t?t.rhsComponentId:void 0;(0,o.useEffect)((()=>{s(P.LOADING)}),[p]);const b="app-bar-icon-".concat(t.pluginId),v=t.tooltipText||d||t.pluginId;let g=l().createElement("div",{role:"button",tabIndex:0,className:"app-bar__icon-inner"},l().createElement("img",{src:p,alt:t.pluginId,onLoad:()=>{s(P.LOADED)},onError:()=>{s(P.ERROR)}}));const h=_?(null==r?void 0:r.id)===_:t.pluginId===(null==r?void 0:r.pluginId);p||(g=l().createElement("div",{role:"button",tabIndex:0,className:D()("app-bar__old-icon app-bar__icon-inner app-bar__icon-inner--centered",{"app-bar__old-icon--active":h})},u)),c===P.ERROR&&(g=l().createElement(C.A,{className:"icon__plugin"}));const E=t.pluginId===m.g_.focalboard;return l().createElement(f.A,{title:v,isVertical:!1},l().createElement("div",{id:b,className:D()("app-bar__icon",{"app-bar__icon--active":h}),onClick:()=>{var e;n&&a?null===(e=t.action)||void 0===e||e.call(t,n,a):"rhsComponentId"in t&&t.action()}},g,E&&l().createElement(x.A,null)))};function W(){const e=(0,i.useSelector)(d.IH),t=(0,i.useSelector)(d.Uj),n=(0,i.useSelector)(s.KM),a=(0,_.y0)(),o=(0,_.pS)(),b=(0,i.useSelector)(d.hN),v=(0,i.useSelector)((e=>(0,p.nP)(e)&&(0,u.pU)(e,c.xB.SYSCONSOLE_WRITE_PLUGINS)));if(!b||a&&!a.showAppBar)return null;const g=[m.g_.focalboard,m.g_.playbooks],[h,E]=r()(t,(e=>{let{pluginId:t}=e;return g.includes(t)})),f=[...h,M(h.length,E.length+e.length+n.length),...E,...e,...n].map((e=>{if(!e)return e;if(L(e)){const t="supportedProductIds"in e?e.supportedProductIds:void 0;return(0,_.SB)(null!=t?t:null,o,null==a?void 0:a.pluginId)?l().createElement(B,{key:e.id,component:e}):null}var t;return A(e)?(0,_.SB)(null!==(t=e.supported_product_ids)&&void 0!==t?t:null,o,null==a?void 0:a.pluginId)?l().createElement(N,{key:"".concat(e.app_id,"_").concat(e.label),binding:e}):null:e}));return l().createElement("div",{className:"app-bar"},l().createElement("div",{className:"app-bar__top"},f),v&&l().createElement("div",{className:"app-bar__bottom"},l().createElement(k,null)))}const M=(e,t)=>e&&t?l().createElement("hr",{key:"divider",className:"app-bar__divider"}):null},62114:(e,t,n)=>{"use strict";n.d(t,{A:()=>_});var a=n(62688),r=n.n(a),o=(n(17046),n(97023)),l=n.n(o),i=n(14778),c=n(23453),s=n(14696),p=n(30596),u=n(40057),d=n(21650);const m=e=>{let{pulsatingDotPlacement:t="left",pulsatingDotTranslate:n}=e;const a=(0,c.useDispatch)(),r=(0,c.useSelector)(d.F9),m=l().createElement(i.FormattedMessage,{id:"newChannelWithBoard.tutorialTip.title",defaultMessage:"Access linked boards from the App Bar"}),_=l().createElement(i.FormattedMessage,{id:"newChannelWithBoard.tutorialTip.description",defaultMessage:"The board you just created can be quickly accessed by clicking on the Boards icon in the App bar. You can view the boards that are linked to this channel in the right-hand sidebar and open one in full view."}),[b,v]=(0,o.useState)(r),g=(0,o.useCallback)((e=>{e.stopPropagation(),v(!1),a((0,p.z)({[u.pm.NEW_CHANNEL_WITH_BOARD_TOUR_SHOWED]:!0}))}),[]),h=(0,o.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),b?(a((0,p.z)({[u.pm.NEW_CHANNEL_WITH_BOARD_TOUR_SHOWED]:!0})),v(!1)):v(!0)}),[]),E=(0,s.LX)(["app-bar-icon-focalboard"],[],{y:-2,height:4,x:0,width:0});return r?l().createElement(s.Yd,{show:!0,screen:_,title:m,overlayPunchOut:E,placement:"right-start",pulsatingDotPlacement:t,step:1,singleTip:!0,showOptOut:!1,interactivePunchOut:!0,handleDismiss:g,handleOpen:h,handlePrevious:g,offset:[-30,5],pulsatingDotTranslate:n}):null};m.propTypes={pulsatingDotTranslate:r().shape({x:r().number.isRequired,y:r().number.isRequired})};const _=m},30596:(e,t,n)=>{"use strict";n.d(t,{z:()=>l}),n(43813);var a=n(7430),r=n(35631),o=n(40057);function l(e){return async(t,n)=>{const l=n(),i=(0,a.WR)(l),c={user_id:i,category:o.pm.APP_BAR,name:o.pm.NEW_CHANNEL_WITH_BOARD_TOUR_SHOWED,value:JSON.stringify(e)};return await t((0,r.SF)(i,[c])),{data:!0}}}},29525:e=>{e.exports=function(e,t,n,a){for(var r=-1,o=null==e?0:e.length;++r<o;){var l=e[r];t(a,l,n(l),e)}return a}},26793:(e,t,n)=>{var a=n(72305);e.exports=function(e,t,n,r){return a(e,(function(e,a,o){t(r,e,n(e),o)})),r}},72305:(e,t,n)=>{var a=n(61701),r=n(42965)(a);e.exports=r},35951:(e,t,n)=>{var a=n(29525),r=n(26793),o=n(31454),l=n(6397);e.exports=function(e,t){return function(n,i){var c=l(n)?a:r,s=t?t():{};return c(n,e,o(i,2),s)}}},42965:(e,t,n)=>{var a=n(18330);e.exports=function(e,t){return function(n,r){if(null==n)return n;if(!a(n))return e(n,r);for(var o=n.length,l=t?o:-1,i=Object(n);(t?l--:++l<o)&&!1!==r(i[l],l,i););return n}}},67710:(e,t,n)=>{var a=n(35951)((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));e.exports=a}}]);
//# sourceMappingURL=1748.62684ddf7e6bc4ad08b6.js.map