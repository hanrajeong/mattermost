"use strict";(self.webpackChunkmattermost_webapp=self.webpackChunkmattermost_webapp||[]).push([[8498],{40142:(e,t,s)=>{s.d(t,{A:()=>S}),s(3188),s(30973),s(97309),s(10844);var a=s(23453),r=s(5908),n=s(87373),o=s(23739),i=s(65952),l=s(75616),d=s(89247),c=s(62688),m=s.n(c),u=(s(43813),s(17046),s(29206),s(4290),s(97023)),p=s.n(u),h=s(34529),g=s(14778),f=s(48774),b=s(50375),v=s(83873),E=s(78451);function T(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function y(e,t,s){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var s=t.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class G extends p().PureComponent{constructor(e){super(e),y(this,"handleHide",(()=>{this.props.actions.setModalSearchTerm(""),this.setState({show:!1})})),y(this,"handleResponse",(e=>{let t=null;e&&e.message&&(t=e.message),this.setState({saving:!1,addError:t})})),y(this,"handleSubmit",(async()=>{const e=this.state.values.map((e=>e.id));if(0!==e.length){if(this.props.skipCommit)return this.props.onAddCallback&&this.props.onAddCallback(e),void this.handleHide();this.setState({saving:!0}),await Promise.all(e.map((async e=>{const{error:t}=await this.props.actions.linkGroupSyncable(e,this.props.currentChannelId,f.CL.Channel,{auto_add:!0});this.handleResponse(t),t||this.handleHide()})))}})),y(this,"addValue",(e=>{const t=Object.assign([],this.state.values),s=t.map((e=>e.id));e&&e.id&&-1===s.indexOf(e.id)&&t.push(e),this.setState({values:t})})),y(this,"setGroupsLoadingState",(e=>{this.setState({loadingGroups:e})})),y(this,"handlePageChange",((e,t)=>{e>t&&(this.setGroupsLoadingState(!0),this.props.actions.getGroupsNotAssociatedToChannel(this.props.currentChannelId,this.props.searchTerm,e,51,!0,"",!0).then((()=>{this.setGroupsLoadingState(!1)})))})),y(this,"handleDelete",(e=>{this.setState({values:e})})),y(this,"search",(e=>{this.props.actions.setModalSearchTerm(e)})),y(this,"renderOption",((e,t,s,a)=>{const r=t?"more-modal__row--selected":"";return p().createElement("div",{key:e.id,ref:t?this.selectedItemRef:e.id,className:"more-modal__row clickable "+r,onClick:()=>s(e),onMouseMove:()=>a?a(e):void 0},p().createElement("img",{className:"more-modal__image",src:v,alt:"group picture",width:"32",height:"32"}),p().createElement("div",{className:"more-modal__details"},p().createElement("div",{className:"more-modal__name"},e.display_name," - ",p().createElement("span",{className:"more-modal__name_sub"},p().createElement(g.FormattedMessage,{id:"numMembers",defaultMessage:"{num, number} {num, plural, one {member} other {members}}",values:{num:e.member_count}})))),p().createElement("div",{className:"more-modal__actions"},p().createElement("button",{className:"more-modal__actions--round","aria-label":"Add groups to channel"},p().createElement("i",{className:"icon icon-plus"}))))})),this.searchTimeoutId=0,this.state={values:[],show:!0,search:!1,saving:!1,addError:null,loadingGroups:!0},this.selectedItemRef=p().createRef()}componentDidMount(){Promise.all([this.props.actions.getTeam(this.props.teamID),this.props.actions.getAllGroupsAssociatedToTeam(this.props.teamID,!1,!0),this.props.actions.getGroupsNotAssociatedToChannel(this.props.currentChannelId,"",0,51,!0,"",!0),this.props.actions.getAllGroupsAssociatedToChannel(this.props.currentChannelId,!1,!0)]).then((()=>{this.setGroupsLoadingState(!1)}))}componentDidUpdate(e){if(this.props.searchTerm!==e.searchTerm){clearTimeout(this.searchTimeoutId);const e=this.props.searchTerm;if(""===e)return;this.searchTimeoutId=window.setTimeout((async()=>{this.setGroupsLoadingState(!0),await this.props.actions.getGroupsNotAssociatedToChannel(this.props.currentChannelId,e,void 0,void 0,!0,"",!0),this.setGroupsLoadingState(!1)}),E.Ay.SEARCH_TIMEOUT_MILLISECONDS)}}renderValue(e){return e.data.display_name}render(){const e=p().createElement("div",{id:"numGroupsRemaining"},p().createElement(g.FormattedMessage,{id:"multiselect.numGroupsRemaining",defaultMessage:"Use ↑↓ to browse, ↵ to select. You can add {num, number} more {num, plural, one {group} other {groups}}. ",values:{num:10-this.state.values.length}})),t=(0,g.defineMessage)({id:"multiselect.add",defaultMessage:"Add"}),s=(0,g.defineMessage)({id:"multiselect.adding",defaultMessage:"Adding..."});let a=null;this.state.addError&&(a=p().createElement("div",{className:"has-error col-sm-12"},p().createElement("label",{className:"control-label font-weight--normal"},this.state.addError)));let r=this.props.groups;if(this.props.excludeGroups){const e=e=>!this.props.excludeGroups.find((t=>t.id===e.id));r=r.filter(e)}if(this.props.includeGroups){const e=e=>this.props.includeGroups.find((t=>t.id===e.id));r=[...r,...this.props.includeGroups.filter(e)]}const n=r.map((e=>function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?T(Object(s),!0).forEach((function(t){y(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):T(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({label:e.display_name,value:e.id},e)));return p().createElement(h.Modal,{id:"addGroupsToChannelModal",dialogClassName:"a11y__modal more-modal more-direct-channels",show:this.state.show,onHide:this.handleHide,onExited:this.props.onExited},p().createElement(h.Modal.Header,{closeButton:!0},p().createElement(h.Modal.Title,{componentClass:"h1"},p().createElement(g.FormattedMessage,{id:"add_groups_to_channel.title",defaultMessage:"Add New Groups to {channelName} Channel",values:{channelName:p().createElement("strong",null,this.props.currentChannelName)}}))),p().createElement(h.Modal.Body,null,a,p().createElement(b.A,{key:"addGroupsToChannelKey",options:n,optionRenderer:this.renderOption,intl:this.props.intl,selectedItemRef:this.selectedItemRef,values:this.state.values,valueRenderer:this.renderValue,perPage:50,handlePageChange:this.handlePageChange,handleInput:this.search,handleDelete:this.handleDelete,handleAdd:this.addValue,handleSubmit:this.handleSubmit,maxValues:10,numRemainingText:e,buttonSubmitText:t,buttonSubmitLoadingText:s,saving:this.state.saving,loading:this.state.loadingGroups,placeholderText:(0,g.defineMessage)({id:"multiselect.addGroupsPlaceholder",defaultMessage:"Search and add groups"})})))}}y(G,"propTypes",{currentChannelName:m().string.isRequired,currentChannelId:m().string.isRequired,teamID:m().string.isRequired,searchTerm:m().string.isRequired,groups:m().array.isRequired,excludeGroups:m().array,includeGroups:m().array,onExited:m().func.isRequired,skipCommit:m().bool,onAddCallback:m().func,actions:m().shape({getGroupsNotAssociatedToChannel:m().func.isRequired,setModalSearchTerm:m().func.isRequired,linkGroupSyncable:m().func.isRequired,getAllGroupsAssociatedToChannel:m().func.isRequired,getTeam:m().func.isRequired,getAllGroupsAssociatedToTeam:m().func.isRequired}).isRequired});const C=(0,g.injectIntl)(G),S=(0,a.connect)((function(e,t){const s=e.views.search.modalSearch,a=t.channel||(0,i.Lw)(e)||{};let r=(0,l.m5)(e,a.id,a.team_id);if(s){const e=RegExp(s,"i");r=r.filter((t=>e.test(t.display_name)||e.test(t.name)))}return{currentChannelName:a.display_name,currentChannelId:a.id,skipCommit:t.skipCommit,onAddCallback:t.onAddCallback,excludeGroups:t.excludeGroups,searchTerm:s,groups:r,teamID:a.team_id}}),(function(e){return{actions:(0,r.bindActionCreators)({getGroupsNotAssociatedToChannel:n.m5,setModalSearchTerm:d.qv,linkGroupSyncable:n.PY,getAllGroupsAssociatedToChannel:n.oj,getTeam:o.Uo,getAllGroupsAssociatedToTeam:n.UT},e)}}))(C)},69669:(e,t,s)=>{s.d(t,{A:()=>S}),s(3188),s(30973),s(97309),s(10844);var a=s(23453),r=s(5908),n=s(87373),o=s(75616),i=s(14776),l=s(89247),d=(s(43813),s(17046),s(29206),s(4290),s(97023)),c=s.n(d),m=s(34529),u=s(14778),p=s(48774),h=s(49136),g=s(50375),f=s(83873),b=s(30138),v=s(78451);function E(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function T(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?E(Object(s),!0).forEach((function(t){y(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):E(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function y(e,t,s){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var s=t.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class G extends c().PureComponent{constructor(e){super(e),y(this,"handleHide",(()=>{this.props.actions.setModalSearchTerm(""),this.setState({show:!1})})),y(this,"handleExit",(()=>{this.props.focusOriginElement&&(0,b.p)(this.props.focusOriginElement,!0),this.props.onExited()})),y(this,"handleResponse",(e=>{let t=null;e&&e.message&&(t=e.message),this.setState({saving:!1,addError:t})})),y(this,"handleSubmit",(async()=>{const e=this.state.values.map((e=>e.id));if(0!==e.length){if(this.props.skipCommit)return this.props.onAddCallback&&this.props.onAddCallback(e),void this.handleHide();this.setState({saving:!0}),await Promise.all(e.map((async e=>{const{error:t}=await this.props.actions.linkGroupSyncable(e,this.props.currentTeamId,p.CL.Team,{auto_add:!0,scheme_admin:!1});this.handleResponse(t),t||this.handleHide()})))}})),y(this,"addValue",(e=>{const t=Object.assign([],this.state.values),s=t.map((e=>e.id));e&&e.id&&-1===s.indexOf(e.id)&&t.push(e),this.setState({values:t})})),y(this,"setGroupsLoadingState",(e=>{this.setState({loadingGroups:e})})),y(this,"handlePageChange",((e,t)=>{e>t&&(this.setGroupsLoadingState(!0),this.props.actions.getGroupsNotAssociatedToTeam(this.props.currentTeamId,this.props.searchTerm,e,51,"",!0).then((()=>{this.setGroupsLoadingState(!1)})))})),y(this,"handleDelete",(e=>this.setState({values:e}))),y(this,"search",(e=>this.props.actions.setModalSearchTerm(e))),y(this,"renderOption",((e,t,s,a)=>{const r=t?"more-modal__row--selected":"";return c().createElement("div",{key:e.id,ref:t?this.selectedItemRef:e.id,className:"more-modal__row clickable "+r,onClick:()=>s(e),onMouseMove:()=>a(e)},c().createElement("img",{className:"more-modal__image",src:f,alt:"group picture",width:"32",height:"32"}),c().createElement("div",{className:"more-modal__details"},c().createElement("div",{className:"more-modal__name"},e.display_name,c().createElement(h.A,null),"-",c().createElement(h.A,null),c().createElement("span",{className:"more-modal__name_sub"},c().createElement(u.FormattedMessage,{id:"numMembers",defaultMessage:"{num, number} {num, plural, one {member} other {members}}",values:{num:e.member_count}})))),c().createElement("div",{className:"more-modal__actions"},c().createElement("button",{className:"more-modal__actions--round","aria-label":"Add groups to team"},c().createElement("i",{className:"icon icon-plus"}))))})),y(this,"renderValue",(e=>e.data.display_name)),this.searchTimeoutId=0,this.state={values:[],show:!0,search:!1,saving:!1,addError:null,loadingGroups:!0},this.selectedItemRef=c().createRef()}componentDidMount(){Promise.all([this.props.actions.getGroupsNotAssociatedToTeam(this.props.currentTeamId,"",0,51,"",!0),this.props.actions.getAllGroupsAssociatedToTeam(this.props.currentTeamId,!1,!0)]).then((()=>{this.setGroupsLoadingState(!1)}))}componentDidUpdate(e){if(this.props.searchTerm!==e.searchTerm){clearTimeout(this.searchTimeoutId);const e=this.props.searchTerm;if(""===e)return;this.searchTimeoutId=window.setTimeout((async()=>{this.setGroupsLoadingState(!0),await this.props.actions.getGroupsNotAssociatedToTeam(this.props.currentTeamId,e,0,51,"",!0),this.setGroupsLoadingState(!1)}),v.Ay.SEARCH_TIMEOUT_MILLISECONDS)}}render(){var e;const t=c().createElement("div",{id:"numGroupsRemaining"},c().createElement(u.FormattedMessage,{id:"multiselect.numGroupsRemaining",defaultMessage:"Use ↑↓ to browse, ↵ to select. You can add {num, number} more {num, plural, one {group} other {groups}}. ",values:{num:10-this.state.values.length}})),s=(0,u.defineMessage)({id:"multiselect.add",defaultMessage:"Add"}),a=(0,u.defineMessage)({id:"multiselect.adding",defaultMessage:"Adding..."});let r=null;this.state.addError&&(r=c().createElement("div",{className:"has-error col-sm-12"},c().createElement("label",{className:"control-label font-weight--normal"},this.state.addError)));let n=this.props.groups;if(this.props.excludeGroups){const e=e=>{var t;return!(null!==(t=this.props.excludeGroups)&&void 0!==t&&t.find((t=>t.id===e.id)))};n=n.filter(e)}if(this.props.includeGroups){const e=e=>{var t;return null===(t=this.props.includeGroups)||void 0===t?void 0:t.find((t=>t.id===e.id))};n=[...n,...this.props.includeGroups.filter(e)]}const o=n.map((e=>T(T({},e),{},{label:e.display_name,value:e.id})));return c().createElement(m.Modal,{id:"addGroupsToTeamModal",dialogClassName:"a11y__modal more-modal more-direct-channels",show:this.state.show,onHide:this.handleHide,onExited:this.handleExit},c().createElement(m.Modal.Header,{closeButton:!0},c().createElement(m.Modal.Title,{componentClass:"h1"},c().createElement(u.FormattedMessage,{id:"add_groups_to_team.title",defaultMessage:"Add New Groups to {teamName} Team",values:{teamName:c().createElement("strong",null,null!==(e=this.props.currentTeamName)&&void 0!==e?e:"")}}))),c().createElement(m.Modal.Body,null,r,c().createElement(g.A,{key:"addGroupsToTeamKey",options:o,optionRenderer:this.renderOption,intl:this.props.intl,selectedItemRef:this.selectedItemRef,values:this.state.values,valueRenderer:this.renderValue,perPage:50,handlePageChange:this.handlePageChange,handleInput:this.search,handleDelete:this.handleDelete,handleAdd:this.addValue,handleSubmit:this.handleSubmit,maxValues:10,numRemainingText:t,buttonSubmitText:s,buttonSubmitLoadingText:a,saving:this.state.saving,loading:this.state.loadingGroups,placeholderText:(0,u.defineMessage)({id:"multiselect.addGroupsPlaceholder",defaultMessage:"Search and add groups"})})))}}const C=(0,u.injectIntl)(G),S=(0,a.connect)((function(e,t){var s;const a=e.views.search.modalSearch,r=t.team||(0,i.H7)(e);let n=(0,o.Gl)(e,(null==r?void 0:r.id)||"");if(a){const e=RegExp(a,"i");n=n.filter((t=>e.test(t.display_name)||e.test(t.name)))}return{currentTeamName:null==r?void 0:r.display_name,currentTeamId:null!==(s=null==r?void 0:r.id)&&void 0!==s?s:(0,i.Sy)(e),skipCommit:t.skipCommit,onAddCallback:t.onAddCallback,excludeGroups:t.excludeGroups,searchTerm:a,groups:n}}),(function(e){return{actions:(0,r.bindActionCreators)({getGroupsNotAssociatedToTeam:n.Gl,setModalSearchTerm:l.qv,linkGroupSyncable:n.PY,getAllGroupsAssociatedToTeam:n.UT},e)}}))(C)},30135:(e,t,s)=>{s.d(t,{A:()=>i}),s(17046);var a=s(97023),r=s(11039),n=s(35412);const o=(e,t)=>t&&null!=e?e:Number.MAX_VALUE;function i(){const e=(0,n.A)(),[t,s]=(0,r.A)();return(0,a.useMemo)((()=>{var a,r,n;return{files:{totalStorage:e.files.totalStorage-o(null===(a=t.files)||void 0===a?void 0:a.total_storage,s),totalStorageLoaded:e.files.totalStorageLoaded},messages:{history:e.messages.history-o(null===(r=t.messages)||void 0===r?void 0:r.history,s),historyLoaded:e.messages.historyLoaded},teams:{active:e.teams.active-o(null===(n=t.teams)||void 0===n?void 0:n.active,s),cloudArchived:e.teams.cloudArchived,teamsLoaded:e.teams.teamsLoaded}}}),[e,t,s])}},36057:(e,t,s)=>{s.d(t,{A:()=>n}),s(29206);var a=s(97023),r=s.n(a);const n=e=>r().createElement("svg",Object.assign({width:140,height:141,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r().createElement("path",{opacity:.4,d:"M37.593 38.008c4.754-4.815 10.754-7.295 17.989-7.428 7.101.133 13.065 2.601 17.892 7.428 4.815 4.827 7.295 10.791 7.428 17.892-.133 7.235-2.601 13.223-7.428 17.99-4.827 4.754-10.791 7.27-17.892 7.512-7.235-.254-13.223-2.758-17.99-7.513-4.754-4.766-7.258-10.766-7.512-18 .254-7.102 2.758-13.066 7.513-17.881Z",fill:"#fff"}),r().createElement("path",{d:"M78.887 51.382c-2.151-6.992-6.225-12.225-12.226-15.69-6.001-3.465-12.57-4.376-19.701-2.743-3.9.995-7.297 2.717-10.22 5.162 3.269-3.567 7.415-6.037 12.428-7.416 7.13-1.633 13.732-.703 19.787 2.793s10.161 8.748 12.313 15.74c1.323 5.037 1.257 9.862-.21 14.47-1.454 4.614-4.066 8.49-7.84 11.611 2.833-3.087 4.783-6.713 5.844-10.894 1.05-4.187.991-8.522-.175-13.033Z",fill:"#000",fillOpacity:.4}),r().createElement("path",{d:"M86.76 53.929c-.508-7.506-3.553-14.097-9.125-19.774-6.346-6.05-13.67-9.08-21.974-9.08-8.303 0-15.616 3.03-21.961 9.08-6.08 6.315-9.126 13.591-9.126 21.855 0 8.262 3.046 15.551 9.126 21.854 5.826 5.556 12.485 8.551 19.967 8.984 7.481.445 14.383-1.611 20.728-6.146l4.75 4.727 6.08-6.05-4.75-4.727c4.69-6.302 6.78-13.218 6.285-20.723Zm-13.126 19.87c-4.823 4.726-10.781 7.228-17.876 7.468-7.228-.252-13.21-2.742-17.973-7.469-4.75-4.727-7.252-10.692-7.506-17.885.254-7.06 2.756-12.99 7.506-17.789 4.75-4.787 10.745-7.252 17.973-7.385 7.095.133 13.053 2.586 17.876 7.385 4.81 4.8 7.288 10.73 7.421 17.79-.133 7.192-2.599 13.157-7.421 17.884Z",fill:"#BABEC9"}),r().createElement("path",{d:"M106.202 114.187c-1.567.449-2.728.291-3.482-.472L78.06 86.651c-.753-.762-1.064-1.743-.945-2.954.12-1.211.874-2.567 2.262-4.093 1.507-1.393 2.847-2.192 4.044-2.385 1.196-.194 2.165.157 2.92 1.053l26.921 24.957c.753.763.873 1.901.37 3.427-.502 1.525-1.447 3.051-2.823 4.577-1.496 1.526-3.039 2.506-4.607 2.954Z",fill:"#FFBC1F"}),r().createElement("path",{d:"m108.007 98.343-10.08 10.164-12.154-13.34 8.914-9.106 13.32 12.282Z",fill:"#7A5600"}))},90617:(e,t,s)=>{s.d(t,{A:()=>o});var a=s(97023),r=s.n(a);const n=()=>r().createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18"},r().createElement("g",{id:"Developer-Export",stroke:"none",strokeWidth:"1",fillRule:"evenodd"},r().createElement("g",{transform:"translate(-285.000000, -933.000000)",id:"All-Team-Members"},r().createElement("g",{transform:"translate(245.000000, 698.000000)"},r().createElement("g",{id:"Channel-Administrators",transform:"translate(0.000000, 106.000000)"},r().createElement("g",{id:"data-table/column-1",transform:"translate(11.000000, 86.000000)"},r().createElement("g",{id:"row-checkbox---Public-Channels",transform:"translate(12.000000, 35.000000)"},r().createElement("g",{id:"Stacked-Group",transform:"translate(0.000000, 5.000000)"},r().createElement("g",{id:"data-table/1st/row-checkbox-label-base"},r().createElement("g",{id:"check-on-copy-11",transform:"translate(14.000000, 0.000000)"},r().createElement("path",{d:"M19,3 L5,3 C3.9,3 3,3.9 3,5 L3,19 C3,20.1 3.9,21 5,21 L19,21 C20.1,21 21,20.1 21,19 L21,5 C21,3.9 20.1,3 19,3 L19,3 Z M10,17 L5,12.1923077 L6.4,10.8461538 L10,14.3076923 L17.6,7 L19,8.34615385 L10,17 L10,17 Z",id:"checkbox---checked"}))))))))))),o=(0,a.memo)(n)},83949:(e,t,s)=>{function a(e){return"data"in e&&!r(e)}function r(e){return Boolean(e.error)}s.d(t,{b:()=>r,o:()=>a})},83873:(e,t,s)=>{e.exports=s.p+"files/377564d283f9bc35cce9.png"}}]);
//# sourceMappingURL=8498.0d237bcb3773eb1379d1.js.map