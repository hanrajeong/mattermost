"use strict";(self.webpackChunkmattermost_webapp=self.webpackChunkmattermost_webapp||[]).push([[3461],{88153:(e,t,a)=>{a.d(t,{A:()=>u});var s=a(62688),n=a.n(s),r=a(71633),i=a.n(r),o=a(97023),l=a.n(o),c=a(14778),m=a(81911);const d=e=>{let{url:t,className:a,onClick:s}=e;const{formatMessage:n}=(0,c.useIntl)();return l().createElement("div",{className:i()("signup-header",a)},l().createElement(m.Link,{"data-testid":"back_button",onClick:s,to:t},l().createElement("span",{id:"back_button_icon",className:"fa fa-1x fa-angle-left",title:n({id:"generic_icons.back",defaultMessage:"Back Icon"})}),l().createElement(c.FormattedMessage,{id:"web.header.back",defaultMessage:"Back"})))};d.propTypes={url:n().string,className:n().string,onClick:n().func},d.defaultProps={url:"/"};const u=d},65894:(e,t,a)=>{a.d(t,{A:()=>i}),a(29206);var s=a(97023),n=a.n(s),r=a(30135);const i=function(e){return t=>{const a=(0,r.A)();return n().createElement(e,Object.assign({usageDeltas:a},t))}}},30135:(e,t,a)=>{a.d(t,{A:()=>o}),a(17046);var s=a(97023),n=a(11039),r=a(35412);const i=(e,t)=>t&&null!=e?e:Number.MAX_VALUE;function o(){const e=(0,r.A)(),[t,a]=(0,n.A)();return(0,s.useMemo)((()=>{var s,n,r;return{files:{totalStorage:e.files.totalStorage-i(null===(s=t.files)||void 0===s?void 0:s.total_storage,a),totalStorageLoaded:e.files.totalStorageLoaded},messages:{history:e.messages.history-i(null===(n=t.messages)||void 0===n?void 0:n.history,a),historyLoaded:e.messages.historyLoaded},teams:{active:e.teams.active-i(null===(r=t.teams)||void 0===r?void 0:r.active,a),cloudArchived:e.teams.cloudArchived,teamsLoaded:e.teams.teamsLoaded}}}),[e,t,a])}},79941:(e,t,a)=>{a.d(t,{A:()=>c});var s=a(62688),n=a.n(s),r=a(97023),i=a.n(r),o=a(14778);const l=e=>{let{customDescriptionText:t,siteName:a="Mattermost"}=e;const s=t||i().createElement(o.FormattedMessage,{id:"web.root.signup_info",defaultMessage:"All team communication in one place, searchable and accessible anywhere"});return i().createElement(i().Fragment,null,i().createElement("h1",{id:"site_name"},a),i().createElement("h3",{id:"site_description",className:"color--light"},s))};l.propTypes={customDescriptionText:n().string};const c=i().memo(l)},83461:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Z});var s=a(23453),n=a(81911),r=a(5908),i=a(28676),o=a(23739),l=a(40057),c=a(45955),m=a(26614),d=a(80635),u=a(14776),g=a(7430),p=a(79342),f=a(46859),h=a(65894),_=a(52231),E=(a(43813),a(57406),a(55448),a(4290),a(97023)),v=a.n(E),b=a(14778),T=a(91767),M=a(59671),N=a(96423),y=a(88153),C=a(46177),A=a.n(C),k=a(1396);function P(e,t,a){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class S extends v().PureComponent{constructor(e){super(e),P(this,"validateBuffer",(e=>e<100?100:Math.abs(e))),P(this,"getAmountOfPages",((e,t)=>Math.ceil(e/t))),P(this,"handleScroll",(()=>{const{isFetching:e,isEndofData:t}=this.state,{callBack:a,bufferValue:s,totalItems:n,itemsPerPage:r,pageNumber:i}=this.props,o=this.node.current,l=this.validateBuffer(s),c=o.scrollHeight-o.clientHeight-l;!(o.scrollTop>c)||t||e||this.setState({isFetching:!0},(async()=>{if(await a(),this.setState({isFetching:!1}),0===n)return void this.setState({isEndofData:!0});const e=this.getAmountOfPages(n,r);i===e&&this.setState({isEndofData:!0})}))})),P(this,"debounceHandleScroll",A()(this.handleScroll,200)),this.state={isFetching:!1,isEndofData:!1},this.node=v().createRef()}componentDidMount(){var e;null===(e=this.node.current)||void 0===e||e.addEventListener("scroll",this.debounceHandleScroll)}componentWillUnmount(){var e;null===(e=this.node.current)||void 0===e||e.removeEventListener("scroll",this.debounceHandleScroll)}render(){const{children:e,endOfDataMessage:t,styleClass:a,loaderStyle:s}=this.props,{isEndofData:n,isFetching:r}=this.state,i=!n&&r;return v().createElement(v().Fragment,null,v().createElement("div",{className:"infinite-scroll ".concat(a),ref:this.node},e,i&&v().createElement(k.A,{style:s,message:" "}),!i&&t))}}P(S,"defaultProps",{bufferValue:100,endOfDataMessage:"",styleClass:"",loaderStyle:{}});var I=a(79941),L=a(17518),w=a(72208),x=a(3708),F=a(51534),D=a(78451),j=a(4715),R=a(62688),B=a.n(R);function U(e){const{formatMessage:t}=(0,b.useIntl)();return v().createElement("span",e,v().createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 20 20",style:J,role:"img","aria-label":t({id:"generic_icons.info",defaultMessage:"Info Icon"})},v().createElement("g",{transform:"matrix(1.17647,0,0,1.17647,-1.55431e-15,-1.00573e-14)"},v().createElement("path",{d:"M8.5,0C3.797,0 0,3.797 0,8.5C0,13.203 3.797,17 8.5,17C13.203,17 17,13.203 17,8.5C17,3.797 13.203,0 8.5,0ZM10,8.5C10,7.672 9.328,7 8.5,7C7.672,7 7,7.672 7,8.5L7,12.45C7,13.278 7.672,13.95 8.5,13.95C9.328,13.95 10,13.278 10,12.45L10,8.5ZM8.5,3C9.328,3 10,3.672 10,4.5C10,5.328 9.328,6 8.5,6C7.672,6 7,5.328 7,4.5C7,3.672 7.672,3 8.5,3Z"}))))}const J={fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421};var O=a(87131),H=a(85873);const Y=e=>{let{team:t,onTeamClick:a,loading:s,canJoinPublicTeams:n,canJoinPrivateTeams:r}=e;const i=(0,b.useIntl)(),o=(0,E.useCallback)((e=>{e.preventDefault(),a(t)}),[a,t]);let l;l=s?v().createElement("span",{className:"fa fa-refresh fa-spin right signup-team__icon",title:i.formatMessage({id:"generic_icons.loading",defaultMessage:"Loading Icon"})}):v().createElement("span",{className:"fa fa-angle-right right signup-team__icon",title:i.formatMessage({id:"select_team.join.icon",defaultMessage:"Join Team Icon"})});const c=t.allow_open_invite&&n||!t.allow_open_invite&&r;return v().createElement("div",{className:"signup-team-dir"},t.description?v().createElement(O.A,{title:t.description},v().createElement(U,{className:"icon icon--info"})):null,v().createElement("a",{href:"#",id:H.rH(t.display_name),onClick:c?o:void 0,className:c?"":"disabled"},v().createElement("span",{className:"signup-team-dir__name"},t.display_name),!t.allow_open_invite&&v().createElement("i",{className:"fa fa-lock light",title:i.formatMessage({id:"select_team.private.icon",defaultMessage:"Private team"})}),c&&l))};Y.propTypes={onTeamClick:B().func.isRequired,loading:B().bool.isRequired,canJoinPublicTeams:B().bool.isRequired,canJoinPrivateTeams:B().bool.isRequired};const G=v().memo(Y);function V(e,t,a){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class q extends v().PureComponent{constructor(e){super(e),V(this,"fetchMoreTeams",(async()=>{const{currentPage:e}=this.state,{actions:t}=this.props,a=await t.getTeams(e,30,!0);a.error||a.error instanceof Error||this.setState((e=>({currentPage:e.currentPage+1})))})),V(this,"handleTeamClick",(async e=>{const{currentUserRoles:t}=this.props;this.setState({loadingTeamId:e.id});const{data:a,error:s}=await this.props.actions.addUserToTeam(e.id,this.props.currentUserId);if(a&&void 0!==this.props.history)this.props.history.push("/".concat(e.name,"/channels/").concat(D.Ay.DEFAULT_CHANNEL));else if(s){let e=s.message;"api.team.add_members.user_denied"===s.server_error_id&&(e=void 0!==t&&t.includes(D.Ay.PERMISSIONS_SYSTEM_ADMIN)?v().createElement(b.FormattedMessage,{id:"join_team_group_constrained_denied_adminText",defaultMessage:"You need to be a member of a linked group to join this team. You can add a group to this team <a>here</a>.",values:{a:e=>v().createElement(n.Link,{to:"/admin_console/user_management/groups"},e)}}):v().createElement(b.FormattedMessage,{id:"join_team_group_constrained_denied",defaultMessage:"You need to be a member of a linked group to join this team."})),this.setState({error:e,loadingTeamId:""})}})),V(this,"handleLogoutClick",(e=>{e.preventDefault(),(0,M.sx)("select_team","click_logout"),(0,T.BN)("/login")})),V(this,"clearError",(e=>{e.preventDefault(),this.setState({error:null})})),this.state={loadingTeamId:"",error:null,endofTeamsData:!1,currentPage:0,currentListableTeams:[]}}static getDerivedStateFromProps(e,t){return e.listableTeams.length!==t.currentListableTeams.length?{currentListableTeams:e.listableTeams.slice(0,30*t.currentPage)}:null}componentDidMount(){(0,M.sx)("signup","signup_select_team",{userId:this.props.currentUserId}),this.fetchMoreTeams(),void 0!==this.props.currentUserRoles&&this.props.actions.loadRolesIfNeeded(this.props.currentUserRoles.split(" "))}render(){const{currentPage:e,currentListableTeams:t}=this.state,{currentUserIsGuest:a,canManageSystem:s,customDescriptionText:r,isMemberOfTeam:i,siteName:o,canCreateTeams:c,canJoinPublicTeams:m,canJoinPrivateTeams:d,totalTeamsCount:u,isCloud:g,isFreeTrial:p,usageDeltas:{teams:{active:f}}}=this.props,h=g&&!p&&f>=0;let _;if(this.state.loadingTeamId)_=v().createElement(k.A,null);else if(this.state.error)_=v().createElement("div",{className:"signup__content"},v().createElement("div",{className:"form-group has-error"},v().createElement("div",{className:"control-label"},this.state.error)));else if(a)_=v().createElement("div",{className:"signup__content"},v().createElement("div",{className:"form-group has-error"},v().createElement("div",{className:"control-label"},v().createElement(b.FormattedMessage,{id:"signup_team.guest_without_channels",defaultMessage:"Your guest account has no channels assigned. Please contact an administrator."}))));else{let a=[];t.forEach((e=>{(e.allow_open_invite&&m||!e.allow_open_invite&&d)&&a.push(v().createElement(G,{key:"team_"+e.name,team:e,onTeamClick:this.handleTeamClick,loading:this.state.loadingTeamId===e.id,canJoinPublicTeams:m,canJoinPrivateTeams:d}))})),0===a.length&&(c||s)?a=v().createElement("div",{className:"signup-team-dir-err"},v().createElement("div",null,h?v().createElement(b.FormattedMessage,{id:"signup_team.no_open_teams",defaultMessage:"No teams are available to join. Please ask your administrator for an invite."}):v().createElement(b.FormattedMessage,{id:"signup_team.no_open_teams_canCreate",defaultMessage:"No teams are available to join. Please create a new team or ask your administrator for an invite."}))):0===a.length&&(a=v().createElement("div",{className:"signup-team-dir-err"},v().createElement("div",null,v().createElement(w.A,{permissions:[l.xB.CREATE_TEAM]},v().createElement(b.FormattedMessage,{id:"signup_team.no_open_teams_canCreate",defaultMessage:"No teams are available to join. Please create a new team or ask your administrator for an invite."})),v().createElement(w.A,{permissions:[l.xB.CREATE_TEAM],invert:!0},v().createElement(b.FormattedMessage,{id:"signup_team.no_open_teams",defaultMessage:"No teams are available to join. Please ask your administrator for an invite."}))))),_=v().createElement("div",{id:"teamsYouCanJoinContent",className:"signup__content"},v().createElement("div",{className:"SelectTeam__sub-header"},v().createElement("h4",null,v().createElement(b.FormattedMessage,{id:"signup_team.join_open",defaultMessage:"Teams you can join: "})),v().createElement(L.A,{location:"learn_about_teams",href:"https://mattermost.com/pl/mattermost-academy-team-training",className:"LearnAboutTeamsLink"},v().createElement("i",{className:"icon icon-lightbulb-outline","aria-hidden":!0}),v().createElement(b.FormattedMessage,{id:"learn_about_teams",defaultMessage:"Learn about teams"}))),v().createElement(S,{callBack:this.fetchMoreTeams,styleClass:"signup-team-all",totalItems:u,itemsPerPage:30,bufferValue:280,pageNumber:e,loaderStyle:{padding:"0px",height:"40px"}},a))}const E=!h&&v().createElement(w.A,{permissions:[l.xB.CREATE_TEAM]},v().createElement("div",{className:"margin--extra",style:{marginTop:"0.5em"}},v().createElement(n.Link,{id:"createNewTeamLink",to:"/create_team",onClick:()=>(0,M.sx)("select_team","click_create_team"),className:"signup-team-login"},v().createElement(b.FormattedMessage,{id:"login.createTeam",defaultMessage:"Create a team"}))));let T,C;return j.KR()||(T=v().createElement(w.A,{permissions:[l.xB.MANAGE_SYSTEM]},v().createElement("div",{className:"mt-8 hidden-xs"},v().createElement(n.Link,{to:"/admin_console",className:"signup-team-login",onClick:()=>(0,M.sx)("select_team","click_system_console")},v().createElement(b.FormattedMessage,{id:"signup_team_system_console",defaultMessage:"Go to System Console"}))))),C=this.state.error?v().createElement(y.A,{onClick:this.clearError}):i?v().createElement(y.A,null):v().createElement("div",{className:"signup-header"},v().createElement("a",{href:"#",id:"logout",onClick:this.handleLogoutClick},v().createElement(x.A,null),v().createElement(b.FormattedMessage,{id:"web.header.logout",defaultMessage:"Logout"}))),v().createElement("div",null,v().createElement(N.default,null),C,v().createElement("div",{className:"col-sm-12"},v().createElement("div",{className:"select-team__container signup-team__container"},v().createElement("img",{alt:"signup team logo",className:"signup-team-logo",src:F}),v().createElement(I.A,{customDescriptionText:r,siteName:o}),_,E,T)))}}const Z=(0,r.compose)(n.withRouter,(0,s.connect)((function(e){const t=(0,m.zj)(e),a=(0,g.HW)(e),s=Object.values((0,u.bO)(e)),n=(0,m.Ay)(e),r=(0,c.dw)(e),i=(0,_.P3)(n),o="true"===(null==r?void 0:r.is_free_trial);return{currentUserId:a.id,currentUserRoles:a.roles||"",currentUserIsGuest:(0,p.P)(a.roles),customDescriptionText:t.CustomDescriptionText,isMemberOfTeam:s&&s.length>0,listableTeams:(0,u.MD)(e,a.locale),siteName:t.SiteName,canCreateTeams:(0,d.y4)(e,{permission:l.xB.CREATE_TEAM}),canManageSystem:(0,d.y4)(e,{permission:l.xB.MANAGE_SYSTEM}),canJoinPublicTeams:(0,d.y4)(e,{permission:l.xB.JOIN_PUBLIC_TEAMS}),canJoinPrivateTeams:(0,d.y4)(e,{permission:l.xB.JOIN_PRIVATE_TEAMS}),totalTeamsCount:e.entities.teams.totalCount||0,isCloud:i,isFreeTrial:o}}),(function(e){return{actions:(0,r.bindActionCreators)({getTeams:o.ZN,loadRolesIfNeeded:i.cF,addUserToTeam:f.$w},e)}})),h.A)(q)},3708:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(97023),n=a.n(s),r=a(14778);function i(){const{formatMessage:e}=(0,r.useIntl)();return n().createElement("i",{className:"fa fa-1x fa-angle-left",title:e({id:"generic_icons.logout",defaultMessage:"Logout Icon"})})}},51534:(e,t,a)=>{e.exports=a.p+"files/ab8aa80cba445eb0fb75.png"}}]);
//# sourceMappingURL=3461.28e024469632e260b35f.js.map